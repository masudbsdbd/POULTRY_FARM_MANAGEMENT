{
  "version": 3,
  "sources": ["../../sifter/sifter.js", "../../microplugin/src/microplugin.js", "../../selectize/dist/js/standalone/selectize.js"],
  "sourcesContent": ["/**\r\n * sifter.js\r\n * Copyright (c) 2013 Brian Reavis & contributors\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\r\n * file except in compliance with the License. You may obtain a copy of the License at:\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\r\n * ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n *\r\n * @author Brian Reavis <brian@thirdroute.com>\r\n */\r\n\r\n(function(root, factory) {\r\n\tif (typeof define === 'function' && define.amd) {\r\n\t\tdefine(factory);\r\n\t} else if (typeof exports === 'object') {\r\n\t\tmodule.exports = factory();\r\n\t} else {\r\n\t\troot.Sifter = factory();\r\n\t}\r\n}(this, function() {\r\n\r\n\t/**\r\n\t * Textually searches arrays and hashes of objects\r\n\t * by property (or multiple properties). Designed\r\n\t * specifically for autocomplete.\r\n\t *\r\n\t * @constructor\r\n\t * @param {array|object} items\r\n\t * @param {object} items\r\n\t */\r\n\tvar Sifter = function(items, settings) {\r\n\t\tthis.items = items;\r\n\t\tthis.settings = settings || {diacritics: true};\r\n\t};\r\n\r\n\t/**\r\n\t * Splits a search string into an array of individual\r\n\t * regexps to be used to match results.\r\n\t *\r\n\t * @param {string} query\r\n\t * @returns {array}\r\n\t */\r\n\tSifter.prototype.tokenize = function(query) {\r\n\t\tquery = trim(String(query || '').toLowerCase());\r\n\t\tif (!query || !query.length) return [];\r\n\r\n\t\tvar i, n, regex, letter;\r\n\t\tvar tokens = [];\r\n\t\tvar words = query.split(/ +/);\r\n\r\n\t\tfor (i = 0, n = words.length; i < n; i++) {\r\n\t\t\tregex = escape_regex(words[i]);\r\n\t\t\tif (this.settings.diacritics) {\r\n\t\t\t\tfor (letter in DIACRITICS) {\r\n\t\t\t\t\tif (DIACRITICS.hasOwnProperty(letter)) {\r\n\t\t\t\t\t\tregex = regex.replace(new RegExp(letter, 'g'), DIACRITICS[letter]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\ttokens.push({\r\n\t\t\t\tstring : words[i],\r\n\t\t\t\tregex  : new RegExp(regex, 'i')\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn tokens;\r\n\t};\r\n\r\n\t/**\r\n\t * Iterates over arrays and hashes.\r\n\t *\r\n\t * ```\r\n\t * this.iterator(this.items, function(item, id) {\r\n\t *    // invoked for each item\r\n\t * });\r\n\t * ```\r\n\t *\r\n\t * @param {array|object} object\r\n\t */\r\n\tSifter.prototype.iterator = function(object, callback) {\r\n\t\tvar iterator;\r\n\t\tif (is_array(object)) {\r\n\t\t\titerator = Array.prototype.forEach || function(callback) {\r\n\t\t\t\tfor (var i = 0, n = this.length; i < n; i++) {\r\n\t\t\t\t\tcallback(this[i], i, this);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\titerator = function(callback) {\r\n\t\t\t\tfor (var key in this) {\r\n\t\t\t\t\tif (this.hasOwnProperty(key)) {\r\n\t\t\t\t\t\tcallback(this[key], key, this);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\titerator.apply(object, [callback]);\r\n\t};\r\n\r\n\t/**\r\n\t * Returns a function to be used to score individual results.\r\n\t *\r\n\t * Good matches will have a higher score than poor matches.\r\n\t * If an item is not a match, 0 will be returned by the function.\r\n\t *\r\n\t * @param {object|string} search\r\n\t * @param {object} options (optional)\r\n\t * @returns {function}\r\n\t */\r\n\tSifter.prototype.getScoreFunction = function(search, options) {\r\n\t\tvar self, fields, tokens, token_count, nesting;\r\n\r\n\t\tself        = this;\r\n\t\tsearch      = self.prepareSearch(search, options);\r\n\t\ttokens      = search.tokens;\r\n\t\tfields      = search.options.fields;\r\n\t\ttoken_count = tokens.length;\r\n\t\tnesting     = search.options.nesting;\r\n\r\n\t\t/**\r\n\t\t * Calculates how close of a match the\r\n\t\t * given value is against a search token.\r\n\t\t *\r\n\t\t * @param {mixed} value\r\n\t\t * @param {object} token\r\n\t\t * @return {number}\r\n\t\t */\r\n\t\tvar scoreValue = function(value, token) {\r\n\t\t\tvar score, pos;\r\n\r\n\t\t\tif (!value) return 0;\r\n\t\t\tvalue = String(value || '');\r\n\t\t\tpos = value.search(token.regex);\r\n\t\t\tif (pos === -1) return 0;\r\n\t\t\tscore = token.string.length / value.length;\r\n\t\t\tif (pos === 0) score += 0.5;\r\n\t\t\treturn score;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Calculates the score of an object\r\n\t\t * against the search query.\r\n\t\t *\r\n\t\t * @param {object} token\r\n\t\t * @param {object} data\r\n\t\t * @return {number}\r\n\t\t */\r\n\t\tvar scoreObject = (function() {\r\n\t\t\tvar field_count = fields.length;\r\n\t\t\tif (!field_count) {\r\n\t\t\t\treturn function() { return 0; };\r\n\t\t\t}\r\n\t\t\tif (field_count === 1) {\r\n\t\t\t\treturn function(token, data) {\r\n\t\t\t\t\treturn scoreValue(getattr(data, fields[0], nesting), token);\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\treturn function(token, data) {\r\n\t\t\t\tfor (var i = 0, sum = 0; i < field_count; i++) {\r\n\t\t\t\t\tsum += scoreValue(getattr(data, fields[i], nesting), token);\r\n\t\t\t\t}\r\n\t\t\t\treturn sum / field_count;\r\n\t\t\t};\r\n\t\t})();\r\n\r\n\t\tif (!token_count) {\r\n\t\t\treturn function() { return 0; };\r\n\t\t}\r\n\t\tif (token_count === 1) {\r\n\t\t\treturn function(data) {\r\n\t\t\t\treturn scoreObject(tokens[0], data);\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tif (search.options.conjunction === 'and') {\r\n\t\t\treturn function(data) {\r\n\t\t\t\tvar score;\r\n\t\t\t\tfor (var i = 0, sum = 0; i < token_count; i++) {\r\n\t\t\t\t\tscore = scoreObject(tokens[i], data);\r\n\t\t\t\t\tif (score <= 0) return 0;\r\n\t\t\t\t\tsum += score;\r\n\t\t\t\t}\r\n\t\t\t\treturn sum / token_count;\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\treturn function(data) {\r\n\t\t\t\tfor (var i = 0, sum = 0; i < token_count; i++) {\r\n\t\t\t\t\tsum += scoreObject(tokens[i], data);\r\n\t\t\t\t}\r\n\t\t\t\treturn sum / token_count;\r\n\t\t\t};\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Returns a function that can be used to compare two\r\n\t * results, for sorting purposes. If no sorting should\r\n\t * be performed, `null` will be returned.\r\n\t *\r\n\t * @param {string|object} search\r\n\t * @param {object} options\r\n\t * @return function(a,b)\r\n\t */\r\n\tSifter.prototype.getSortFunction = function(search, options) {\r\n\t\tvar i, n, self, field, fields, fields_count, multiplier, multipliers, get_field, implicit_score, sort;\r\n\r\n\t\tself   = this;\r\n\t\tsearch = self.prepareSearch(search, options);\r\n\t\tsort   = (!search.query && options.sort_empty) || options.sort;\r\n\r\n\t\t/**\r\n\t\t * Fetches the specified sort field value\r\n\t\t * from a search result item.\r\n\t\t *\r\n\t\t * @param  {string} name\r\n\t\t * @param  {object} result\r\n\t\t * @return {mixed}\r\n\t\t */\r\n\t\tget_field = function(name, result) {\r\n\t\t\tif (name === '$score') return result.score;\r\n\t\t\treturn getattr(self.items[result.id], name, options.nesting);\r\n\t\t};\r\n\r\n\t\t// parse options\r\n\t\tfields = [];\r\n\t\tif (sort) {\r\n\t\t\tfor (i = 0, n = sort.length; i < n; i++) {\r\n\t\t\t\tif (search.query || sort[i].field !== '$score') {\r\n\t\t\t\t\tfields.push(sort[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// the \"$score\" field is implied to be the primary\r\n\t\t// sort field, unless it's manually specified\r\n\t\tif (search.query) {\r\n\t\t\timplicit_score = true;\r\n\t\t\tfor (i = 0, n = fields.length; i < n; i++) {\r\n\t\t\t\tif (fields[i].field === '$score') {\r\n\t\t\t\t\timplicit_score = false;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (implicit_score) {\r\n\t\t\t\tfields.unshift({field: '$score', direction: 'desc'});\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tfor (i = 0, n = fields.length; i < n; i++) {\r\n\t\t\t\tif (fields[i].field === '$score') {\r\n\t\t\t\t\tfields.splice(i, 1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tmultipliers = [];\r\n\t\tfor (i = 0, n = fields.length; i < n; i++) {\r\n\t\t\tmultipliers.push(fields[i].direction === 'desc' ? -1 : 1);\r\n\t\t}\r\n\r\n\t\t// build function\r\n\t\tfields_count = fields.length;\r\n\t\tif (!fields_count) {\r\n\t\t\treturn null;\r\n\t\t} else if (fields_count === 1) {\r\n\t\t\tfield = fields[0].field;\r\n\t\t\tmultiplier = multipliers[0];\r\n\t\t\treturn function(a, b) {\r\n\t\t\t\treturn multiplier * cmp(\r\n\t\t\t\t\tget_field(field, a),\r\n\t\t\t\t\tget_field(field, b)\r\n\t\t\t\t);\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\treturn function(a, b) {\r\n\t\t\t\tvar i, result, a_value, b_value, field;\r\n\t\t\t\tfor (i = 0; i < fields_count; i++) {\r\n\t\t\t\t\tfield = fields[i].field;\r\n\t\t\t\t\tresult = multipliers[i] * cmp(\r\n\t\t\t\t\t\tget_field(field, a),\r\n\t\t\t\t\t\tget_field(field, b)\r\n\t\t\t\t\t);\r\n\t\t\t\t\tif (result) return result;\r\n\t\t\t\t}\r\n\t\t\t\treturn 0;\r\n\t\t\t};\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Parses a search query and returns an object\r\n\t * with tokens and fields ready to be populated\r\n\t * with results.\r\n\t *\r\n\t * @param {string} query\r\n\t * @param {object} options\r\n\t * @returns {object}\r\n\t */\r\n\tSifter.prototype.prepareSearch = function(query, options) {\r\n\t\tif (typeof query === 'object') return query;\r\n\r\n\t\toptions = extend({}, options);\r\n\r\n\t\tvar option_fields     = options.fields;\r\n\t\tvar option_sort       = options.sort;\r\n\t\tvar option_sort_empty = options.sort_empty;\r\n\r\n\t\tif (option_fields && !is_array(option_fields)) options.fields = [option_fields];\r\n\t\tif (option_sort && !is_array(option_sort)) options.sort = [option_sort];\r\n\t\tif (option_sort_empty && !is_array(option_sort_empty)) options.sort_empty = [option_sort_empty];\r\n\r\n\t\treturn {\r\n\t\t\toptions : options,\r\n\t\t\tquery   : String(query || '').toLowerCase(),\r\n\t\t\ttokens  : this.tokenize(query),\r\n\t\t\ttotal   : 0,\r\n\t\t\titems   : []\r\n\t\t};\r\n\t};\r\n\r\n\t/**\r\n\t * Searches through all items and returns a sorted array of matches.\r\n\t *\r\n\t * The `options` parameter can contain:\r\n\t *\r\n\t *   - fields {string|array}\r\n\t *   - sort {array}\r\n\t *   - score {function}\r\n\t *   - filter {bool}\r\n\t *   - limit {integer}\r\n\t *\r\n\t * Returns an object containing:\r\n\t *\r\n\t *   - options {object}\r\n\t *   - query {string}\r\n\t *   - tokens {array}\r\n\t *   - total {int}\r\n\t *   - items {array}\r\n\t *\r\n\t * @param {string} query\r\n\t * @param {object} options\r\n\t * @returns {object}\r\n\t */\r\n\tSifter.prototype.search = function(query, options) {\r\n\t\tvar self = this, value, score, search, calculateScore;\r\n\t\tvar fn_sort;\r\n\t\tvar fn_score;\r\n\r\n\t\tsearch  = this.prepareSearch(query, options);\r\n\t\toptions = search.options;\r\n\t\tquery   = search.query;\r\n\r\n\t\t// generate result scoring function\r\n\t\tfn_score = options.score || self.getScoreFunction(search);\r\n\r\n\t\t// perform search and sort\r\n\t\tif (query.length) {\r\n\t\t\tself.iterator(self.items, function(item, id) {\r\n\t\t\t\tscore = fn_score(item);\r\n\t\t\t\tif (options.filter === false || score > 0) {\r\n\t\t\t\t\tsearch.items.push({'score': score, 'id': id});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tself.iterator(self.items, function(item, id) {\r\n\t\t\t\tsearch.items.push({'score': 1, 'id': id});\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tfn_sort = self.getSortFunction(search, options);\r\n\t\tif (fn_sort) search.items.sort(fn_sort);\r\n\r\n\t\t// apply limits\r\n\t\tsearch.total = search.items.length;\r\n\t\tif (typeof options.limit === 'number') {\r\n\t\t\tsearch.items = search.items.slice(0, options.limit);\r\n\t\t}\r\n\r\n\t\treturn search;\r\n\t};\r\n\r\n\t// utilities\r\n\t// - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\r\n\r\n\tvar cmp = function(a, b) {\r\n\t\tif (typeof a === 'number' && typeof b === 'number') {\r\n\t\t\treturn a > b ? 1 : (a < b ? -1 : 0);\r\n\t\t}\r\n\t\ta = asciifold(String(a || ''));\r\n\t\tb = asciifold(String(b || ''));\r\n\t\tif (a > b) return 1;\r\n\t\tif (b > a) return -1;\r\n\t\treturn 0;\r\n\t};\r\n\r\n\tvar extend = function(a, b) {\r\n\t\tvar i, n, k, object;\r\n\t\tfor (i = 1, n = arguments.length; i < n; i++) {\r\n\t\t\tobject = arguments[i];\r\n\t\t\tif (!object) continue;\r\n\t\t\tfor (k in object) {\r\n\t\t\t\tif (object.hasOwnProperty(k)) {\r\n\t\t\t\t\ta[k] = object[k];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn a;\r\n\t};\r\n\r\n\t/**\r\n\t * A property getter resolving dot-notation\r\n\t * @param  {Object}  obj     The root object to fetch property on\r\n\t * @param  {String}  name    The optionally dotted property name to fetch\r\n\t * @param  {Boolean} nesting Handle nesting or not\r\n\t * @return {Object}          The resolved property value\r\n\t */\r\n\tvar getattr = function(obj, name, nesting) {\r\n\t    if (!obj || !name) return;\r\n\t    if (!nesting) return obj[name];\r\n\t    var names = name.split(\".\");\r\n\t    while(names.length && (obj = obj[names.shift()]));\r\n\t    return obj;\r\n\t};\r\n\r\n\tvar trim = function(str) {\r\n\t\treturn (str + '').replace(/^\\s+|\\s+$|/g, '');\r\n\t};\r\n\r\n\tvar escape_regex = function(str) {\r\n\t\treturn (str + '').replace(/([.?*+^$[\\]\\\\(){}|-])/g, '\\\\$1');\r\n\t};\r\n\r\n\tvar is_array = Array.isArray || (typeof $ !== 'undefined' && $.isArray) || function(object) {\r\n\t\treturn Object.prototype.toString.call(object) === '[object Array]';\r\n\t};\r\n\r\n\tvar DIACRITICS = {\r\n\t\t'a': '[aá¸€á¸Ä‚ÄƒÃ‚Ã¢ÇÇŽÈºâ±¥È¦È§áº áº¡Ã„Ã¤Ã€Ã ÃÃ¡Ä€ÄÃƒÃ£Ã…Ã¥Ä…Ä„ÃƒÄ…Ä„]',\r\n\t\t'b': '[bâ¢Î²Î’Bà¸¿ðŒá›’]',\r\n\t\t'c': '[cÄ†Ä‡ÄˆÄ‰ÄŒÄÄŠÄ‹CÌ„cÌ„Ã‡Ã§á¸ˆá¸‰È»È¼Æ‡ÆˆÉ•á´„ï¼£ï½ƒ]',\r\n\t\t'd': '[dÄŽÄá¸Šá¸‹á¸á¸‘á¸Œá¸á¸’á¸“á¸Žá¸ÄÄ‘DÌ¦dÌ¦Æ‰É–ÆŠÉ—Æ‹ÆŒáµ­á¶á¶‘È¡á´…ï¼¤ï½„Ã°]',\r\n\t\t'e': '[eÃ‰Ã©ÃˆÃ¨ÃŠÃªá¸˜á¸™ÄšÄ›Ä”Ä•áº¼áº½á¸šá¸›áººáº»Ä–Ä—Ã‹Ã«Ä’Ä“È¨È©Ä˜Ä™á¶’É†É‡È„È…áº¾áº¿á»€á»á»„á»…á»‚á»ƒá¸œá¸á¸–á¸—á¸”á¸•È†È‡áº¸áº¹á»†á»‡â±¸á´‡ï¼¥ï½…É˜ÇÆÆÎµ]',\r\n\t\t'f': '[fÆ‘Æ’á¸žá¸Ÿ]',\r\n\t\t'g': '[gÉ¢â‚²Ç¤Ç¥ÄœÄÄžÄŸÄ¢Ä£Æ“É Ä Ä¡]',\r\n\t\t'h': '[hÄ¤Ä¥Ä¦Ä§á¸¨á¸©áº–áº–á¸¤á¸¥á¸¢á¸£É¦Ê°Ç¶Æ•]',\r\n\t\t'i': '[iÃÃ­ÃŒÃ¬Ä¬Ä­ÃŽÃ®ÇÇÃÃ¯á¸®á¸¯Ä¨Ä©Ä®Ä¯ÄªÄ«á»ˆá»‰ÈˆÈ‰ÈŠÈ‹á»Šá»‹á¸¬á¸­Æ—É¨É¨Ì†áµ»á¶–Ä°iIÄ±Éªï¼©ï½‰]',\r\n\t\t'j': '[jÈ·Ä´ÄµÉˆÉ‰ÊÉŸÊ²]',\r\n\t\t'k': '[kÆ˜Æ™ê€êá¸°á¸±Ç¨Ç©á¸²á¸³á¸´á¸µÎºÏ°â‚­]',\r\n\t\t'l': '[lÅÅ‚Ä½Ä¾Ä»Ä¼Ä¹Äºá¸¶á¸·á¸¸á¸¹á¸¼á¸½á¸ºá¸»Ä¿Å€È½Æšâ± â±¡â±¢É«É¬á¶…É­È´ÊŸï¼¬ï½Œ]',\r\n\t\t'n': '[nÅƒÅ„Ç¸Ç¹Å‡ÅˆÃ‘Ã±á¹„á¹…Å…Å†á¹†á¹‡á¹Šá¹‹á¹ˆá¹‰NÌˆnÌˆÆÉ²È Æžáµ°á¶‡É³ÈµÉ´ï¼®ï½ŽÅŠÅ‹]',\r\n\t\t'o': '[oÃ˜Ã¸Ã–Ã¶Ã“Ã³Ã’Ã²Ã”Ã´Ç‘Ç’ÅÅ‘ÅŽÅÈ®È¯á»Œá»ÆŸÉµÆ Æ¡á»Žá»ÅŒÅÃ•ÃµÇªÇ«ÈŒÈÕ•Ö…]',\r\n\t\t'p': '[pá¹”á¹•á¹–á¹—â±£áµ½Æ¤Æ¥áµ±]',\r\n\t\t'q': '[qê–ê—Ê ÉŠÉ‹ê˜ê™qÌƒ]',\r\n\t\t'r': '[rÅ”Å•ÉŒÉÅ˜Å™Å–Å—á¹˜á¹™ÈÈ‘È’È“á¹šá¹›â±¤É½]',\r\n\t\t's': '[sÅšÅ›á¹ á¹¡á¹¢á¹£êž¨êž©ÅœÅÅ Å¡ÅžÅŸÈ˜È™SÌˆsÌˆ]',\r\n\t\t't': '[tÅ¤Å¥á¹ªá¹«Å¢Å£á¹¬á¹­Æ®ÊˆÈšÈ›á¹°á¹±á¹®á¹¯Æ¬Æ­]',\r\n\t\t'u': '[uÅ¬Å­É„Ê‰á»¤á»¥ÃœÃ¼ÃšÃºÃ™Ã¹Ã›Ã»Ç“Ç”Å°Å±Å¬Å­Æ¯Æ°á»¦á»§ÅªÅ«Å¨Å©Å²Å³È”È•âˆª]',\r\n\t\t'v': '[vá¹¼á¹½á¹¾á¹¿Æ²Ê‹êžêŸâ±±Ê‹]',\r\n\t\t'w': '[wáº‚áºƒáº€áºÅ´Åµáº„áº…áº†áº‡áºˆáº‰]',\r\n\t\t'x': '[xáºŒáºáºŠáº‹Ï‡]',\r\n\t\t'y': '[yÃÃ½á»²á»³Å¶Å·Å¸Ã¿á»¸á»¹áºŽáºá»´á»µÉŽÉÆ³Æ´]',\r\n\t\t'z': '[zÅ¹Åºáºáº‘Å½Å¾Å»Å¼áº’áº“áº”áº•ÆµÆ¶]'\r\n\t};\r\n\r\n\tvar asciifold = (function() {\r\n\t\tvar i, n, k, chunk;\r\n\t\tvar foreignletters = '';\r\n\t\tvar lookup = {};\r\n\t\tfor (k in DIACRITICS) {\r\n\t\t\tif (DIACRITICS.hasOwnProperty(k)) {\r\n\t\t\t\tchunk = DIACRITICS[k].substring(2, DIACRITICS[k].length - 1);\r\n\t\t\t\tforeignletters += chunk;\r\n\t\t\t\tfor (i = 0, n = chunk.length; i < n; i++) {\r\n\t\t\t\t\tlookup[chunk.charAt(i)] = k;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar regexp = new RegExp('[' +  foreignletters + ']', 'g');\r\n\t\treturn function(str) {\r\n\t\t\treturn str.replace(regexp, function(foreignletter) {\r\n\t\t\t\treturn lookup[foreignletter];\r\n\t\t\t}).toLowerCase();\r\n\t\t};\r\n\t})();\r\n\r\n\r\n\t// export\r\n\t// - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\r\n\r\n\treturn Sifter;\r\n}));\r\n\r\n", "/**\r\n * microplugin.js\r\n * Copyright (c) 2013 Brian Reavis & contributors\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\r\n * file except in compliance with the License. You may obtain a copy of the License at:\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\r\n * ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n *\r\n * @author Brian Reavis <brian@thirdroute.com>\r\n */\r\n\r\n(function(root, factory) {\r\n\tif (typeof define === 'function' && define.amd) {\r\n\t\tdefine(factory);\r\n\t} else if (typeof exports === 'object') {\r\n\t\tmodule.exports = factory();\r\n\t} else {\r\n\t\troot.MicroPlugin = factory();\r\n\t}\r\n}(this, function() {\r\n\tvar MicroPlugin = {};\r\n\r\n\tMicroPlugin.mixin = function(Interface) {\r\n\t\tInterface.plugins = {};\r\n\r\n\t\t/**\r\n\t\t * Initializes the listed plugins (with options).\r\n\t\t * Acceptable formats:\r\n\t\t *\r\n\t\t * List (without options):\r\n\t\t *   ['a', 'b', 'c']\r\n\t\t *\r\n\t\t * List (with options):\r\n\t\t *   [{'name': 'a', options: {}}, {'name': 'b', options: {}}]\r\n\t\t *\r\n\t\t * Hash (with options):\r\n\t\t *   {'a': { ... }, 'b': { ... }, 'c': { ... }}\r\n\t\t *\r\n\t\t * @param {mixed} plugins\r\n\t\t */\r\n\t\tInterface.prototype.initializePlugins = function(plugins) {\r\n\t\t\tvar i, n, key;\r\n\t\t\tvar self  = this;\r\n\t\t\tvar queue = [];\r\n\r\n\t\t\tself.plugins = {\r\n\t\t\t\tnames     : [],\r\n\t\t\t\tsettings  : {},\r\n\t\t\t\trequested : {},\r\n\t\t\t\tloaded    : {}\r\n\t\t\t};\r\n\r\n\t\t\tif (utils.isArray(plugins)) {\r\n\t\t\t\tfor (i = 0, n = plugins.length; i < n; i++) {\r\n\t\t\t\t\tif (typeof plugins[i] === 'string') {\r\n\t\t\t\t\t\tqueue.push(plugins[i]);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tself.plugins.settings[plugins[i].name] = plugins[i].options;\r\n\t\t\t\t\t\tqueue.push(plugins[i].name);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else if (plugins) {\r\n\t\t\t\tfor (key in plugins) {\r\n\t\t\t\t\tif (plugins.hasOwnProperty(key)) {\r\n\t\t\t\t\t\tself.plugins.settings[key] = plugins[key];\r\n\t\t\t\t\t\tqueue.push(key);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\twhile (queue.length) {\r\n\t\t\t\tself.require(queue.shift());\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tInterface.prototype.loadPlugin = function(name) {\r\n\t\t\tvar self    = this;\r\n\t\t\tvar plugins = self.plugins;\r\n\t\t\tvar plugin  = Interface.plugins[name];\r\n\r\n\t\t\tif (!Interface.plugins.hasOwnProperty(name)) {\r\n\t\t\t\tthrow new Error('Unable to find \"' +  name + '\" plugin');\r\n\t\t\t}\r\n\r\n\t\t\tplugins.requested[name] = true;\r\n\t\t\tplugins.loaded[name] = plugin.fn.apply(self, [self.plugins.settings[name] || {}]);\r\n\t\t\tplugins.names.push(name);\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Initializes a plugin.\r\n\t\t *\r\n\t\t * @param {string} name\r\n\t\t */\r\n\t\tInterface.prototype.require = function(name) {\r\n\t\t\tvar self = this;\r\n\t\t\tvar plugins = self.plugins;\r\n\r\n\t\t\tif (!self.plugins.loaded.hasOwnProperty(name)) {\r\n\t\t\t\tif (plugins.requested[name]) {\r\n\t\t\t\t\tthrow new Error('Plugin has circular dependency (\"' + name + '\")');\r\n\t\t\t\t}\r\n\t\t\t\tself.loadPlugin(name);\r\n\t\t\t}\r\n\r\n\t\t\treturn plugins.loaded[name];\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Registers a plugin.\r\n\t\t *\r\n\t\t * @param {string} name\r\n\t\t * @param {function} fn\r\n\t\t */\r\n\t\tInterface.define = function(name, fn) {\r\n\t\t\tInterface.plugins[name] = {\r\n\t\t\t\t'name' : name,\r\n\t\t\t\t'fn'   : fn\r\n\t\t\t};\r\n\t\t};\r\n\t};\r\n\r\n\tvar utils = {\r\n\t\tisArray: Array.isArray || function(vArg) {\r\n\t\t\treturn Object.prototype.toString.call(vArg) === '[object Array]';\r\n\t\t}\r\n\t};\r\n\r\n\treturn MicroPlugin;\r\n}));", "/**\r\n * sifter.js\r\n * Copyright (c) 2013 Brian Reavis & contributors\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\r\n * file except in compliance with the License. You may obtain a copy of the License at:\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\r\n * ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n *\r\n * @author Brian Reavis <brian@thirdroute.com>\r\n */\r\n\r\n(function(root, factory) {\r\n\tif (typeof define === 'function' && define.amd) {\r\n\t\tdefine('sifter', factory);\r\n\t} else if (typeof exports === 'object') {\r\n\t\tmodule.exports = factory();\r\n\t} else {\r\n\t\troot.Sifter = factory();\r\n\t}\r\n}(this, function() {\r\n\r\n\t/**\r\n\t * Textually searches arrays and hashes of objects\r\n\t * by property (or multiple properties). Designed\r\n\t * specifically for autocomplete.\r\n\t *\r\n\t * @constructor\r\n\t * @param {array|object} items\r\n\t * @param {object} items\r\n\t */\r\n\tvar Sifter = function(items, settings) {\r\n\t\tthis.items = items;\r\n\t\tthis.settings = settings || {diacritics: true};\r\n\t};\r\n\r\n\t/**\r\n\t * Splits a search string into an array of individual\r\n\t * regexps to be used to match results.\r\n\t *\r\n\t * @param {string} query\r\n\t * @returns {array}\r\n\t */\r\n\tSifter.prototype.tokenize = function(query) {\r\n\t\tquery = trim(String(query || '').toLowerCase());\r\n\t\tif (!query || !query.length) return [];\r\n\r\n\t\tvar i, n, regex, letter;\r\n\t\tvar tokens = [];\r\n\t\tvar words = query.split(/ +/);\r\n\r\n\t\tfor (i = 0, n = words.length; i < n; i++) {\r\n\t\t\tregex = escape_regex(words[i]);\r\n\t\t\tif (this.settings.diacritics) {\r\n\t\t\t\tfor (letter in DIACRITICS) {\r\n\t\t\t\t\tif (DIACRITICS.hasOwnProperty(letter)) {\r\n\t\t\t\t\t\tregex = regex.replace(new RegExp(letter, 'g'), DIACRITICS[letter]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\ttokens.push({\r\n\t\t\t\tstring : words[i],\r\n\t\t\t\tregex  : new RegExp(regex, 'i')\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\treturn tokens;\r\n\t};\r\n\r\n\t/**\r\n\t * Iterates over arrays and hashes.\r\n\t *\r\n\t * ```\r\n\t * this.iterator(this.items, function(item, id) {\r\n\t *    // invoked for each item\r\n\t * });\r\n\t * ```\r\n\t *\r\n\t * @param {array|object} object\r\n\t */\r\n\tSifter.prototype.iterator = function(object, callback) {\r\n\t\tvar iterator;\r\n\t\tif (is_array(object)) {\r\n\t\t\titerator = Array.prototype.forEach || function(callback) {\r\n\t\t\t\tfor (var i = 0, n = this.length; i < n; i++) {\r\n\t\t\t\t\tcallback(this[i], i, this);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\titerator = function(callback) {\r\n\t\t\t\tfor (var key in this) {\r\n\t\t\t\t\tif (this.hasOwnProperty(key)) {\r\n\t\t\t\t\t\tcallback(this[key], key, this);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\titerator.apply(object, [callback]);\r\n\t};\r\n\r\n\t/**\r\n\t * Returns a function to be used to score individual results.\r\n\t *\r\n\t * Good matches will have a higher score than poor matches.\r\n\t * If an item is not a match, 0 will be returned by the function.\r\n\t *\r\n\t * @param {object|string} search\r\n\t * @param {object} options (optional)\r\n\t * @returns {function}\r\n\t */\r\n\tSifter.prototype.getScoreFunction = function(search, options) {\r\n\t\tvar self, fields, tokens, token_count, nesting;\r\n\r\n\t\tself        = this;\r\n\t\tsearch      = self.prepareSearch(search, options);\r\n\t\ttokens      = search.tokens;\r\n\t\tfields      = search.options.fields;\r\n\t\ttoken_count = tokens.length;\r\n\t\tnesting     = search.options.nesting;\r\n\r\n\t\t/**\r\n\t\t * Calculates how close of a match the\r\n\t\t * given value is against a search token.\r\n\t\t *\r\n\t\t * @param {mixed} value\r\n\t\t * @param {object} token\r\n\t\t * @return {number}\r\n\t\t */\r\n\t\tvar scoreValue = function(value, token) {\r\n\t\t\tvar score, pos;\r\n\r\n\t\t\tif (!value) return 0;\r\n\t\t\tvalue = String(value || '');\r\n\t\t\tpos = value.search(token.regex);\r\n\t\t\tif (pos === -1) return 0;\r\n\t\t\tscore = token.string.length / value.length;\r\n\t\t\tif (pos === 0) score += 0.5;\r\n\t\t\treturn score;\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Calculates the score of an object\r\n\t\t * against the search query.\r\n\t\t *\r\n\t\t * @param {object} token\r\n\t\t * @param {object} data\r\n\t\t * @return {number}\r\n\t\t */\r\n\t\tvar scoreObject = (function() {\r\n\t\t\tvar field_count = fields.length;\r\n\t\t\tif (!field_count) {\r\n\t\t\t\treturn function() { return 0; };\r\n\t\t\t}\r\n\t\t\tif (field_count === 1) {\r\n\t\t\t\treturn function(token, data) {\r\n\t\t\t\t\treturn scoreValue(getattr(data, fields[0], nesting), token);\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\treturn function(token, data) {\r\n\t\t\t\tfor (var i = 0, sum = 0; i < field_count; i++) {\r\n\t\t\t\t\tsum += scoreValue(getattr(data, fields[i], nesting), token);\r\n\t\t\t\t}\r\n\t\t\t\treturn sum / field_count;\r\n\t\t\t};\r\n\t\t})();\r\n\r\n\t\tif (!token_count) {\r\n\t\t\treturn function() { return 0; };\r\n\t\t}\r\n\t\tif (token_count === 1) {\r\n\t\t\treturn function(data) {\r\n\t\t\t\treturn scoreObject(tokens[0], data);\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tif (search.options.conjunction === 'and') {\r\n\t\t\treturn function(data) {\r\n\t\t\t\tvar score;\r\n\t\t\t\tfor (var i = 0, sum = 0; i < token_count; i++) {\r\n\t\t\t\t\tscore = scoreObject(tokens[i], data);\r\n\t\t\t\t\tif (score <= 0) return 0;\r\n\t\t\t\t\tsum += score;\r\n\t\t\t\t}\r\n\t\t\t\treturn sum / token_count;\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\treturn function(data) {\r\n\t\t\t\tfor (var i = 0, sum = 0; i < token_count; i++) {\r\n\t\t\t\t\tsum += scoreObject(tokens[i], data);\r\n\t\t\t\t}\r\n\t\t\t\treturn sum / token_count;\r\n\t\t\t};\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Returns a function that can be used to compare two\r\n\t * results, for sorting purposes. If no sorting should\r\n\t * be performed, `null` will be returned.\r\n\t *\r\n\t * @param {string|object} search\r\n\t * @param {object} options\r\n\t * @return function(a,b)\r\n\t */\r\n\tSifter.prototype.getSortFunction = function(search, options) {\r\n\t\tvar i, n, self, field, fields, fields_count, multiplier, multipliers, get_field, implicit_score, sort;\r\n\r\n\t\tself   = this;\r\n\t\tsearch = self.prepareSearch(search, options);\r\n\t\tsort   = (!search.query && options.sort_empty) || options.sort;\r\n\r\n\t\t/**\r\n\t\t * Fetches the specified sort field value\r\n\t\t * from a search result item.\r\n\t\t *\r\n\t\t * @param  {string} name\r\n\t\t * @param  {object} result\r\n\t\t * @return {mixed}\r\n\t\t */\r\n\t\tget_field = function(name, result) {\r\n\t\t\tif (name === '$score') return result.score;\r\n\t\t\treturn getattr(self.items[result.id], name, options.nesting);\r\n\t\t};\r\n\r\n\t\t// parse options\r\n\t\tfields = [];\r\n\t\tif (sort) {\r\n\t\t\tfor (i = 0, n = sort.length; i < n; i++) {\r\n\t\t\t\tif (search.query || sort[i].field !== '$score') {\r\n\t\t\t\t\tfields.push(sort[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// the \"$score\" field is implied to be the primary\r\n\t\t// sort field, unless it's manually specified\r\n\t\tif (search.query) {\r\n\t\t\timplicit_score = true;\r\n\t\t\tfor (i = 0, n = fields.length; i < n; i++) {\r\n\t\t\t\tif (fields[i].field === '$score') {\r\n\t\t\t\t\timplicit_score = false;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (implicit_score) {\r\n\t\t\t\tfields.unshift({field: '$score', direction: 'desc'});\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tfor (i = 0, n = fields.length; i < n; i++) {\r\n\t\t\t\tif (fields[i].field === '$score') {\r\n\t\t\t\t\tfields.splice(i, 1);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tmultipliers = [];\r\n\t\tfor (i = 0, n = fields.length; i < n; i++) {\r\n\t\t\tmultipliers.push(fields[i].direction === 'desc' ? -1 : 1);\r\n\t\t}\r\n\r\n\t\t// build function\r\n\t\tfields_count = fields.length;\r\n\t\tif (!fields_count) {\r\n\t\t\treturn null;\r\n\t\t} else if (fields_count === 1) {\r\n\t\t\tfield = fields[0].field;\r\n\t\t\tmultiplier = multipliers[0];\r\n\t\t\treturn function(a, b) {\r\n\t\t\t\treturn multiplier * cmp(\r\n\t\t\t\t\tget_field(field, a),\r\n\t\t\t\t\tget_field(field, b)\r\n\t\t\t\t);\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\treturn function(a, b) {\r\n\t\t\t\tvar i, result, a_value, b_value, field;\r\n\t\t\t\tfor (i = 0; i < fields_count; i++) {\r\n\t\t\t\t\tfield = fields[i].field;\r\n\t\t\t\t\tresult = multipliers[i] * cmp(\r\n\t\t\t\t\t\tget_field(field, a),\r\n\t\t\t\t\t\tget_field(field, b)\r\n\t\t\t\t\t);\r\n\t\t\t\t\tif (result) return result;\r\n\t\t\t\t}\r\n\t\t\t\treturn 0;\r\n\t\t\t};\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Parses a search query and returns an object\r\n\t * with tokens and fields ready to be populated\r\n\t * with results.\r\n\t *\r\n\t * @param {string} query\r\n\t * @param {object} options\r\n\t * @returns {object}\r\n\t */\r\n\tSifter.prototype.prepareSearch = function(query, options) {\r\n\t\tif (typeof query === 'object') return query;\r\n\r\n\t\toptions = extend({}, options);\r\n\r\n\t\tvar option_fields     = options.fields;\r\n\t\tvar option_sort       = options.sort;\r\n\t\tvar option_sort_empty = options.sort_empty;\r\n\r\n\t\tif (option_fields && !is_array(option_fields)) options.fields = [option_fields];\r\n\t\tif (option_sort && !is_array(option_sort)) options.sort = [option_sort];\r\n\t\tif (option_sort_empty && !is_array(option_sort_empty)) options.sort_empty = [option_sort_empty];\r\n\r\n\t\treturn {\r\n\t\t\toptions : options,\r\n\t\t\tquery   : String(query || '').toLowerCase(),\r\n\t\t\ttokens  : this.tokenize(query),\r\n\t\t\ttotal   : 0,\r\n\t\t\titems   : []\r\n\t\t};\r\n\t};\r\n\r\n\t/**\r\n\t * Searches through all items and returns a sorted array of matches.\r\n\t *\r\n\t * The `options` parameter can contain:\r\n\t *\r\n\t *   - fields {string|array}\r\n\t *   - sort {array}\r\n\t *   - score {function}\r\n\t *   - filter {bool}\r\n\t *   - limit {integer}\r\n\t *\r\n\t * Returns an object containing:\r\n\t *\r\n\t *   - options {object}\r\n\t *   - query {string}\r\n\t *   - tokens {array}\r\n\t *   - total {int}\r\n\t *   - items {array}\r\n\t *\r\n\t * @param {string} query\r\n\t * @param {object} options\r\n\t * @returns {object}\r\n\t */\r\n\tSifter.prototype.search = function(query, options) {\r\n\t\tvar self = this, value, score, search, calculateScore;\r\n\t\tvar fn_sort;\r\n\t\tvar fn_score;\r\n\r\n\t\tsearch  = this.prepareSearch(query, options);\r\n\t\toptions = search.options;\r\n\t\tquery   = search.query;\r\n\r\n\t\t// generate result scoring function\r\n\t\tfn_score = options.score || self.getScoreFunction(search);\r\n\r\n\t\t// perform search and sort\r\n\t\tif (query.length) {\r\n\t\t\tself.iterator(self.items, function(item, id) {\r\n\t\t\t\tscore = fn_score(item);\r\n\t\t\t\tif (options.filter === false || score > 0) {\r\n\t\t\t\t\tsearch.items.push({'score': score, 'id': id});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tself.iterator(self.items, function(item, id) {\r\n\t\t\t\tsearch.items.push({'score': 1, 'id': id});\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tfn_sort = self.getSortFunction(search, options);\r\n\t\tif (fn_sort) search.items.sort(fn_sort);\r\n\r\n\t\t// apply limits\r\n\t\tsearch.total = search.items.length;\r\n\t\tif (typeof options.limit === 'number') {\r\n\t\t\tsearch.items = search.items.slice(0, options.limit);\r\n\t\t}\r\n\r\n\t\treturn search;\r\n\t};\r\n\r\n\t// utilities\r\n\t// - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\r\n\r\n\tvar cmp = function(a, b) {\r\n\t\tif (typeof a === 'number' && typeof b === 'number') {\r\n\t\t\treturn a > b ? 1 : (a < b ? -1 : 0);\r\n\t\t}\r\n\t\ta = asciifold(String(a || ''));\r\n\t\tb = asciifold(String(b || ''));\r\n\t\tif (a > b) return 1;\r\n\t\tif (b > a) return -1;\r\n\t\treturn 0;\r\n\t};\r\n\r\n\tvar extend = function(a, b) {\r\n\t\tvar i, n, k, object;\r\n\t\tfor (i = 1, n = arguments.length; i < n; i++) {\r\n\t\t\tobject = arguments[i];\r\n\t\t\tif (!object) continue;\r\n\t\t\tfor (k in object) {\r\n\t\t\t\tif (object.hasOwnProperty(k)) {\r\n\t\t\t\t\ta[k] = object[k];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn a;\r\n\t};\r\n\r\n\t/**\r\n\t * A property getter resolving dot-notation\r\n\t * @param  {Object}  obj     The root object to fetch property on\r\n\t * @param  {String}  name    The optionally dotted property name to fetch\r\n\t * @param  {Boolean} nesting Handle nesting or not\r\n\t * @return {Object}          The resolved property value\r\n\t */\r\n\tvar getattr = function(obj, name, nesting) {\r\n\t    if (!obj || !name) return;\r\n\t    if (!nesting) return obj[name];\r\n\t    var names = name.split(\".\");\r\n\t    while(names.length && (obj = obj[names.shift()]));\r\n\t    return obj;\r\n\t};\r\n\r\n\tvar trim = function(str) {\r\n\t\treturn (str + '').replace(/^\\s+|\\s+$|/g, '');\r\n\t};\r\n\r\n\tvar escape_regex = function(str) {\r\n\t\treturn (str + '').replace(/([.?*+^$[\\]\\\\(){}|-])/g, '\\\\$1');\r\n\t};\r\n\r\n\tvar is_array = Array.isArray || (typeof $ !== 'undefined' && $.isArray) || function(object) {\r\n\t\treturn Object.prototype.toString.call(object) === '[object Array]';\r\n\t};\r\n\r\n\tvar DIACRITICS = {\r\n\t\t'a': '[aá¸€á¸Ä‚ÄƒÃ‚Ã¢ÇÇŽÈºâ±¥È¦È§áº áº¡Ã„Ã¤Ã€Ã ÃÃ¡Ä€ÄÃƒÃ£Ã…Ã¥Ä…Ä„ÃƒÄ…Ä„]',\r\n\t\t'b': '[bâ¢Î²Î’Bà¸¿ðŒá›’]',\r\n\t\t'c': '[cÄ†Ä‡ÄˆÄ‰ÄŒÄÄŠÄ‹CÌ„cÌ„Ã‡Ã§á¸ˆá¸‰È»È¼Æ‡ÆˆÉ•á´„ï¼£ï½ƒ]',\r\n\t\t'd': '[dÄŽÄá¸Šá¸‹á¸á¸‘á¸Œá¸á¸’á¸“á¸Žá¸ÄÄ‘DÌ¦dÌ¦Æ‰É–ÆŠÉ—Æ‹ÆŒáµ­á¶á¶‘È¡á´…ï¼¤ï½„Ã°]',\r\n\t\t'e': '[eÃ‰Ã©ÃˆÃ¨ÃŠÃªá¸˜á¸™ÄšÄ›Ä”Ä•áº¼áº½á¸šá¸›áººáº»Ä–Ä—Ã‹Ã«Ä’Ä“È¨È©Ä˜Ä™á¶’É†É‡È„È…áº¾áº¿á»€á»á»„á»…á»‚á»ƒá¸œá¸á¸–á¸—á¸”á¸•È†È‡áº¸áº¹á»†á»‡â±¸á´‡ï¼¥ï½…É˜ÇÆÆÎµ]',\r\n\t\t'f': '[fÆ‘Æ’á¸žá¸Ÿ]',\r\n\t\t'g': '[gÉ¢â‚²Ç¤Ç¥ÄœÄÄžÄŸÄ¢Ä£Æ“É Ä Ä¡]',\r\n\t\t'h': '[hÄ¤Ä¥Ä¦Ä§á¸¨á¸©áº–áº–á¸¤á¸¥á¸¢á¸£É¦Ê°Ç¶Æ•]',\r\n\t\t'i': '[iÃÃ­ÃŒÃ¬Ä¬Ä­ÃŽÃ®ÇÇÃÃ¯á¸®á¸¯Ä¨Ä©Ä®Ä¯ÄªÄ«á»ˆá»‰ÈˆÈ‰ÈŠÈ‹á»Šá»‹á¸¬á¸­Æ—É¨É¨Ì†áµ»á¶–Ä°iIÄ±Éªï¼©ï½‰]',\r\n\t\t'j': '[jÈ·Ä´ÄµÉˆÉ‰ÊÉŸÊ²]',\r\n\t\t'k': '[kÆ˜Æ™ê€êá¸°á¸±Ç¨Ç©á¸²á¸³á¸´á¸µÎºÏ°â‚­]',\r\n\t\t'l': '[lÅÅ‚Ä½Ä¾Ä»Ä¼Ä¹Äºá¸¶á¸·á¸¸á¸¹á¸¼á¸½á¸ºá¸»Ä¿Å€È½Æšâ± â±¡â±¢É«É¬á¶…É­È´ÊŸï¼¬ï½Œ]',\r\n\t\t'n': '[nÅƒÅ„Ç¸Ç¹Å‡ÅˆÃ‘Ã±á¹„á¹…Å…Å†á¹†á¹‡á¹Šá¹‹á¹ˆá¹‰NÌˆnÌˆÆÉ²È Æžáµ°á¶‡É³ÈµÉ´ï¼®ï½ŽÅŠÅ‹]',\r\n\t\t'o': '[oÃ˜Ã¸Ã–Ã¶Ã“Ã³Ã’Ã²Ã”Ã´Ç‘Ç’ÅÅ‘ÅŽÅÈ®È¯á»Œá»ÆŸÉµÆ Æ¡á»Žá»ÅŒÅÃ•ÃµÇªÇ«ÈŒÈÕ•Ö…]',\r\n\t\t'p': '[pá¹”á¹•á¹–á¹—â±£áµ½Æ¤Æ¥áµ±]',\r\n\t\t'q': '[qê–ê—Ê ÉŠÉ‹ê˜ê™qÌƒ]',\r\n\t\t'r': '[rÅ”Å•ÉŒÉÅ˜Å™Å–Å—á¹˜á¹™ÈÈ‘È’È“á¹šá¹›â±¤É½]',\r\n\t\t's': '[sÅšÅ›á¹ á¹¡á¹¢á¹£êž¨êž©ÅœÅÅ Å¡ÅžÅŸÈ˜È™SÌˆsÌˆ]',\r\n\t\t't': '[tÅ¤Å¥á¹ªá¹«Å¢Å£á¹¬á¹­Æ®ÊˆÈšÈ›á¹°á¹±á¹®á¹¯Æ¬Æ­]',\r\n\t\t'u': '[uÅ¬Å­É„Ê‰á»¤á»¥ÃœÃ¼ÃšÃºÃ™Ã¹Ã›Ã»Ç“Ç”Å°Å±Å¬Å­Æ¯Æ°á»¦á»§ÅªÅ«Å¨Å©Å²Å³È”È•âˆª]',\r\n\t\t'v': '[vá¹¼á¹½á¹¾á¹¿Æ²Ê‹êžêŸâ±±Ê‹]',\r\n\t\t'w': '[wáº‚áºƒáº€áºÅ´Åµáº„áº…áº†áº‡áºˆáº‰]',\r\n\t\t'x': '[xáºŒáºáºŠáº‹Ï‡]',\r\n\t\t'y': '[yÃÃ½á»²á»³Å¶Å·Å¸Ã¿á»¸á»¹áºŽáºá»´á»µÉŽÉÆ³Æ´]',\r\n\t\t'z': '[zÅ¹Åºáºáº‘Å½Å¾Å»Å¼áº’áº“áº”áº•ÆµÆ¶]'\r\n\t};\r\n\r\n\tvar asciifold = (function() {\r\n\t\tvar i, n, k, chunk;\r\n\t\tvar foreignletters = '';\r\n\t\tvar lookup = {};\r\n\t\tfor (k in DIACRITICS) {\r\n\t\t\tif (DIACRITICS.hasOwnProperty(k)) {\r\n\t\t\t\tchunk = DIACRITICS[k].substring(2, DIACRITICS[k].length - 1);\r\n\t\t\t\tforeignletters += chunk;\r\n\t\t\t\tfor (i = 0, n = chunk.length; i < n; i++) {\r\n\t\t\t\t\tlookup[chunk.charAt(i)] = k;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar regexp = new RegExp('[' +  foreignletters + ']', 'g');\r\n\t\treturn function(str) {\r\n\t\t\treturn str.replace(regexp, function(foreignletter) {\r\n\t\t\t\treturn lookup[foreignletter];\r\n\t\t\t}).toLowerCase();\r\n\t\t};\r\n\t})();\r\n\r\n\r\n\t// export\r\n\t// - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\r\n\r\n\treturn Sifter;\r\n}));\r\n\r\n\r\n\r\n/**\r\n * microplugin.js\r\n * Copyright (c) 2013 Brian Reavis & contributors\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\r\n * file except in compliance with the License. You may obtain a copy of the License at:\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\r\n * ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n *\r\n * @author Brian Reavis <brian@thirdroute.com>\r\n */\r\n\r\n(function(root, factory) {\r\n\tif (typeof define === 'function' && define.amd) {\r\n\t\tdefine('microplugin', factory);\r\n\t} else if (typeof exports === 'object') {\r\n\t\tmodule.exports = factory();\r\n\t} else {\r\n\t\troot.MicroPlugin = factory();\r\n\t}\r\n}(this, function() {\r\n\tvar MicroPlugin = {};\r\n\r\n\tMicroPlugin.mixin = function(Interface) {\r\n\t\tInterface.plugins = {};\r\n\r\n\t\t/**\r\n\t\t * Initializes the listed plugins (with options).\r\n\t\t * Acceptable formats:\r\n\t\t *\r\n\t\t * List (without options):\r\n\t\t *   ['a', 'b', 'c']\r\n\t\t *\r\n\t\t * List (with options):\r\n\t\t *   [{'name': 'a', options: {}}, {'name': 'b', options: {}}]\r\n\t\t *\r\n\t\t * Hash (with options):\r\n\t\t *   {'a': { ... }, 'b': { ... }, 'c': { ... }}\r\n\t\t *\r\n\t\t * @param {mixed} plugins\r\n\t\t */\r\n\t\tInterface.prototype.initializePlugins = function(plugins) {\r\n\t\t\tvar i, n, key;\r\n\t\t\tvar self  = this;\r\n\t\t\tvar queue = [];\r\n\r\n\t\t\tself.plugins = {\r\n\t\t\t\tnames     : [],\r\n\t\t\t\tsettings  : {},\r\n\t\t\t\trequested : {},\r\n\t\t\t\tloaded    : {}\r\n\t\t\t};\r\n\r\n\t\t\tif (utils.isArray(plugins)) {\r\n\t\t\t\tfor (i = 0, n = plugins.length; i < n; i++) {\r\n\t\t\t\t\tif (typeof plugins[i] === 'string') {\r\n\t\t\t\t\t\tqueue.push(plugins[i]);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tself.plugins.settings[plugins[i].name] = plugins[i].options;\r\n\t\t\t\t\t\tqueue.push(plugins[i].name);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else if (plugins) {\r\n\t\t\t\tfor (key in plugins) {\r\n\t\t\t\t\tif (plugins.hasOwnProperty(key)) {\r\n\t\t\t\t\t\tself.plugins.settings[key] = plugins[key];\r\n\t\t\t\t\t\tqueue.push(key);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\twhile (queue.length) {\r\n\t\t\t\tself.require(queue.shift());\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tInterface.prototype.loadPlugin = function(name) {\r\n\t\t\tvar self    = this;\r\n\t\t\tvar plugins = self.plugins;\r\n\t\t\tvar plugin  = Interface.plugins[name];\r\n\r\n\t\t\tif (!Interface.plugins.hasOwnProperty(name)) {\r\n\t\t\t\tthrow new Error('Unable to find \"' +  name + '\" plugin');\r\n\t\t\t}\r\n\r\n\t\t\tplugins.requested[name] = true;\r\n\t\t\tplugins.loaded[name] = plugin.fn.apply(self, [self.plugins.settings[name] || {}]);\r\n\t\t\tplugins.names.push(name);\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Initializes a plugin.\r\n\t\t *\r\n\t\t * @param {string} name\r\n\t\t */\r\n\t\tInterface.prototype.require = function(name) {\r\n\t\t\tvar self = this;\r\n\t\t\tvar plugins = self.plugins;\r\n\r\n\t\t\tif (!self.plugins.loaded.hasOwnProperty(name)) {\r\n\t\t\t\tif (plugins.requested[name]) {\r\n\t\t\t\t\tthrow new Error('Plugin has circular dependency (\"' + name + '\")');\r\n\t\t\t\t}\r\n\t\t\t\tself.loadPlugin(name);\r\n\t\t\t}\r\n\r\n\t\t\treturn plugins.loaded[name];\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Registers a plugin.\r\n\t\t *\r\n\t\t * @param {string} name\r\n\t\t * @param {function} fn\r\n\t\t */\r\n\t\tInterface.define = function(name, fn) {\r\n\t\t\tInterface.plugins[name] = {\r\n\t\t\t\t'name' : name,\r\n\t\t\t\t'fn'   : fn\r\n\t\t\t};\r\n\t\t};\r\n\t};\r\n\r\n\tvar utils = {\r\n\t\tisArray: Array.isArray || function(vArg) {\r\n\t\t\treturn Object.prototype.toString.call(vArg) === '[object Array]';\r\n\t\t}\r\n\t};\r\n\r\n\treturn MicroPlugin;\r\n}));\r\n\r\n/**\r\n * selectize.js (v0.12.6)\r\n * Copyright (c) 2013â€“2015 Brian Reavis & contributors\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\r\n * file except in compliance with the License. You may obtain a copy of the License at:\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software distributed under\r\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\r\n * ANY KIND, either express or implied. See the License for the specific language\r\n * governing permissions and limitations under the License.\r\n *\r\n * @author Brian Reavis <brian@thirdroute.com>\r\n */\r\n\r\n/*jshint curly:false */\r\n/*jshint browser:true */\r\n\r\n(function(root, factory) {\r\n\tif (typeof define === 'function' && define.amd) {\r\n\t\tdefine('selectize', ['jquery','sifter','microplugin'], factory);\r\n\t} else if (typeof exports === 'object') {\r\n\t\tmodule.exports = factory(require('jquery'), require('sifter'), require('microplugin'));\r\n\t} else {\r\n\t\troot.Selectize = factory(root.jQuery, root.Sifter, root.MicroPlugin);\r\n\t}\r\n}(this, function($, Sifter, MicroPlugin) {\r\n\t'use strict';\r\n\r\n\tvar highlight = function($element, pattern) {\r\n\t\tif (typeof pattern === 'string' && !pattern.length) return;\r\n\t\tvar regex = (typeof pattern === 'string') ? new RegExp(pattern, 'i') : pattern;\r\n\t\r\n\t\tvar highlight = function(node) {\r\n\t\t\tvar skip = 0;\r\n\t\t\t// Wrap matching part of text node with highlighting <span>, e.g.\r\n\t\t\t// Soccer  ->  <span class=\"highlight\">Soc</span>cer  for regex = /soc/i\r\n\t\t\tif (node.nodeType === 3) {\r\n\t\t\t\tvar pos = node.data.search(regex);\r\n\t\t\t\tif (pos >= 0 && node.data.length > 0) {\r\n\t\t\t\t\tvar match = node.data.match(regex);\r\n\t\t\t\t\tvar spannode = document.createElement('span');\r\n\t\t\t\t\tspannode.className = 'highlight';\r\n\t\t\t\t\tvar middlebit = node.splitText(pos);\r\n\t\t\t\t\tvar endbit = middlebit.splitText(match[0].length);\r\n\t\t\t\t\tvar middleclone = middlebit.cloneNode(true);\r\n\t\t\t\t\tspannode.appendChild(middleclone);\r\n\t\t\t\t\tmiddlebit.parentNode.replaceChild(spannode, middlebit);\r\n\t\t\t\t\tskip = 1;\r\n\t\t\t\t}\r\n\t\t\t} \r\n\t\t\t// Recurse element node, looking for child text nodes to highlight, unless element \r\n\t\t\t// is childless, <script>, <style>, or already highlighted: <span class=\"hightlight\">\r\n\t\t\telse if (node.nodeType === 1 && node.childNodes && !/(script|style)/i.test(node.tagName) && ( node.className !== 'highlight' || node.tagName !== 'SPAN' )) {\r\n\t\t\t\tfor (var i = 0; i < node.childNodes.length; ++i) {\r\n\t\t\t\t\ti += highlight(node.childNodes[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn skip;\r\n\t\t};\r\n\t\r\n\t\treturn $element.each(function() {\r\n\t\t\thighlight(this);\r\n\t\t});\r\n\t};\r\n\t\r\n\t/**\r\n\t * removeHighlight fn copied from highlight v5 and\r\n\t * edited to remove with() and pass js strict mode\r\n\t */\r\n\t$.fn.removeHighlight = function() {\r\n\t\treturn this.find(\"span.highlight\").each(function() {\r\n\t\t\tthis.parentNode.firstChild.nodeName;\r\n\t\t\tvar parent = this.parentNode;\r\n\t\t\tparent.replaceChild(this.firstChild, this);\r\n\t\t\tparent.normalize();\r\n\t\t}).end();\r\n\t};\r\n\t\r\n\t\r\n\tvar MicroEvent = function() {};\r\n\tMicroEvent.prototype = {\r\n\t\ton: function(event, fct){\r\n\t\t\tthis._events = this._events || {};\r\n\t\t\tthis._events[event] = this._events[event] || [];\r\n\t\t\tthis._events[event].push(fct);\r\n\t\t},\r\n\t\toff: function(event, fct){\r\n\t\t\tvar n = arguments.length;\r\n\t\t\tif (n === 0) return delete this._events;\r\n\t\t\tif (n === 1) return delete this._events[event];\r\n\t\r\n\t\t\tthis._events = this._events || {};\r\n\t\t\tif (event in this._events === false) return;\r\n\t\t\tthis._events[event].splice(this._events[event].indexOf(fct), 1);\r\n\t\t},\r\n\t\ttrigger: function(event /* , args... */){\r\n\t\t\tthis._events = this._events || {};\r\n\t\t\tif (event in this._events === false) return;\r\n\t\t\tfor (var i = 0; i < this._events[event].length; i++){\r\n\t\t\t\tthis._events[event][i].apply(this, Array.prototype.slice.call(arguments, 1));\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\t\r\n\t/**\r\n\t * Mixin will delegate all MicroEvent.js function in the destination object.\r\n\t *\r\n\t * - MicroEvent.mixin(Foobar) will make Foobar able to use MicroEvent\r\n\t *\r\n\t * @param {object} the object which will support MicroEvent\r\n\t */\r\n\tMicroEvent.mixin = function(destObject){\r\n\t\tvar props = ['on', 'off', 'trigger'];\r\n\t\tfor (var i = 0; i < props.length; i++){\r\n\t\t\tdestObject.prototype[props[i]] = MicroEvent.prototype[props[i]];\r\n\t\t}\r\n\t};\r\n\t\r\n\tvar IS_MAC        = /Mac/.test(navigator.userAgent);\r\n\t\r\n\tvar KEY_A         = 65;\r\n\tvar KEY_COMMA     = 188;\r\n\tvar KEY_RETURN    = 13;\r\n\tvar KEY_ESC       = 27;\r\n\tvar KEY_LEFT      = 37;\r\n\tvar KEY_UP        = 38;\r\n\tvar KEY_P         = 80;\r\n\tvar KEY_RIGHT     = 39;\r\n\tvar KEY_DOWN      = 40;\r\n\tvar KEY_N         = 78;\r\n\tvar KEY_BACKSPACE = 8;\r\n\tvar KEY_DELETE    = 46;\r\n\tvar KEY_SHIFT     = 16;\r\n\tvar KEY_CMD       = IS_MAC ? 91 : 17;\r\n\tvar KEY_CTRL      = IS_MAC ? 18 : 17;\r\n\tvar KEY_TAB       = 9;\r\n\t\r\n\tvar TAG_SELECT    = 1;\r\n\tvar TAG_INPUT     = 2;\r\n\t\r\n\t// for now, android support in general is too spotty to support validity\r\n\tvar SUPPORTS_VALIDITY_API = !/android/i.test(window.navigator.userAgent) && !!document.createElement('input').validity;\r\n\t\r\n\t\r\n\tvar isset = function(object) {\r\n\t\treturn typeof object !== 'undefined';\r\n\t};\r\n\t\r\n\t/**\r\n\t * Converts a scalar to its best string representation\r\n\t * for hash keys and HTML attribute values.\r\n\t *\r\n\t * Transformations:\r\n\t *   'str'     -> 'str'\r\n\t *   null      -> ''\r\n\t *   undefined -> ''\r\n\t *   true      -> '1'\r\n\t *   false     -> '0'\r\n\t *   0         -> '0'\r\n\t *   1         -> '1'\r\n\t *\r\n\t * @param {string} value\r\n\t * @returns {string|null}\r\n\t */\r\n\tvar hash_key = function(value) {\r\n\t\tif (typeof value === 'undefined' || value === null) return null;\r\n\t\tif (typeof value === 'boolean') return value ? '1' : '0';\r\n\t\treturn value + '';\r\n\t};\r\n\t\r\n\t/**\r\n\t * Escapes a string for use within HTML.\r\n\t *\r\n\t * @param {string} str\r\n\t * @returns {string}\r\n\t */\r\n\tvar escape_html = function(str) {\r\n\t\treturn (str + '')\r\n\t\t\t.replace(/&/g, '&amp;')\r\n\t\t\t.replace(/</g, '&lt;')\r\n\t\t\t.replace(/>/g, '&gt;')\r\n\t\t\t.replace(/\"/g, '&quot;');\r\n\t};\r\n\t\r\n\t/**\r\n\t * Escapes \"$\" characters in replacement strings.\r\n\t *\r\n\t * @param {string} str\r\n\t * @returns {string}\r\n\t */\r\n\tvar escape_replace = function(str) {\r\n\t\treturn (str + '').replace(/\\$/g, '$$$$');\r\n\t};\r\n\t\r\n\tvar hook = {};\r\n\t\r\n\t/**\r\n\t * Wraps `method` on `self` so that `fn`\r\n\t * is invoked before the original method.\r\n\t *\r\n\t * @param {object} self\r\n\t * @param {string} method\r\n\t * @param {function} fn\r\n\t */\r\n\thook.before = function(self, method, fn) {\r\n\t\tvar original = self[method];\r\n\t\tself[method] = function() {\r\n\t\t\tfn.apply(self, arguments);\r\n\t\t\treturn original.apply(self, arguments);\r\n\t\t};\r\n\t};\r\n\t\r\n\t/**\r\n\t * Wraps `method` on `self` so that `fn`\r\n\t * is invoked after the original method.\r\n\t *\r\n\t * @param {object} self\r\n\t * @param {string} method\r\n\t * @param {function} fn\r\n\t */\r\n\thook.after = function(self, method, fn) {\r\n\t\tvar original = self[method];\r\n\t\tself[method] = function() {\r\n\t\t\tvar result = original.apply(self, arguments);\r\n\t\t\tfn.apply(self, arguments);\r\n\t\t\treturn result;\r\n\t\t};\r\n\t};\r\n\t\r\n\t/**\r\n\t * Wraps `fn` so that it can only be invoked once.\r\n\t *\r\n\t * @param {function} fn\r\n\t * @returns {function}\r\n\t */\r\n\tvar once = function(fn) {\r\n\t\tvar called = false;\r\n\t\treturn function() {\r\n\t\t\tif (called) return;\r\n\t\t\tcalled = true;\r\n\t\t\tfn.apply(this, arguments);\r\n\t\t};\r\n\t};\r\n\t\r\n\t/**\r\n\t * Wraps `fn` so that it can only be called once\r\n\t * every `delay` milliseconds (invoked on the falling edge).\r\n\t *\r\n\t * @param {function} fn\r\n\t * @param {int} delay\r\n\t * @returns {function}\r\n\t */\r\n\tvar debounce = function(fn, delay) {\r\n\t\tvar timeout;\r\n\t\treturn function() {\r\n\t\t\tvar self = this;\r\n\t\t\tvar args = arguments;\r\n\t\t\twindow.clearTimeout(timeout);\r\n\t\t\ttimeout = window.setTimeout(function() {\r\n\t\t\t\tfn.apply(self, args);\r\n\t\t\t}, delay);\r\n\t\t};\r\n\t};\r\n\t\r\n\t/**\r\n\t * Debounce all fired events types listed in `types`\r\n\t * while executing the provided `fn`.\r\n\t *\r\n\t * @param {object} self\r\n\t * @param {array} types\r\n\t * @param {function} fn\r\n\t */\r\n\tvar debounce_events = function(self, types, fn) {\r\n\t\tvar type;\r\n\t\tvar trigger = self.trigger;\r\n\t\tvar event_args = {};\r\n\t\r\n\t\t// override trigger method\r\n\t\tself.trigger = function() {\r\n\t\t\tvar type = arguments[0];\r\n\t\t\tif (types.indexOf(type) !== -1) {\r\n\t\t\t\tevent_args[type] = arguments;\r\n\t\t\t} else {\r\n\t\t\t\treturn trigger.apply(self, arguments);\r\n\t\t\t}\r\n\t\t};\r\n\t\r\n\t\t// invoke provided function\r\n\t\tfn.apply(self, []);\r\n\t\tself.trigger = trigger;\r\n\t\r\n\t\t// trigger queued events\r\n\t\tfor (type in event_args) {\r\n\t\t\tif (event_args.hasOwnProperty(type)) {\r\n\t\t\t\ttrigger.apply(self, event_args[type]);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\t\r\n\t/**\r\n\t * A workaround for http://bugs.jquery.com/ticket/6696\r\n\t *\r\n\t * @param {object} $parent - Parent element to listen on.\r\n\t * @param {string} event - Event name.\r\n\t * @param {string} selector - Descendant selector to filter by.\r\n\t * @param {function} fn - Event handler.\r\n\t */\r\n\tvar watchChildEvent = function($parent, event, selector, fn) {\r\n\t\t$parent.on(event, selector, function(e) {\r\n\t\t\tvar child = e.target;\r\n\t\t\twhile (child && child.parentNode !== $parent[0]) {\r\n\t\t\t\tchild = child.parentNode;\r\n\t\t\t}\r\n\t\t\te.currentTarget = child;\r\n\t\t\treturn fn.apply(this, [e]);\r\n\t\t});\r\n\t};\r\n\t\r\n\t/**\r\n\t * Determines the current selection within a text input control.\r\n\t * Returns an object containing:\r\n\t *   - start\r\n\t *   - length\r\n\t *\r\n\t * @param {object} input\r\n\t * @returns {object}\r\n\t */\r\n\tvar getSelection = function(input) {\r\n\t\tvar result = {};\r\n\t\tif ('selectionStart' in input) {\r\n\t\t\tresult.start = input.selectionStart;\r\n\t\t\tresult.length = input.selectionEnd - result.start;\r\n\t\t} else if (document.selection) {\r\n\t\t\tinput.focus();\r\n\t\t\tvar sel = document.selection.createRange();\r\n\t\t\tvar selLen = document.selection.createRange().text.length;\r\n\t\t\tsel.moveStart('character', -input.value.length);\r\n\t\t\tresult.start = sel.text.length - selLen;\r\n\t\t\tresult.length = selLen;\r\n\t\t}\r\n\t\treturn result;\r\n\t};\r\n\t\r\n\t/**\r\n\t * Copies CSS properties from one element to another.\r\n\t *\r\n\t * @param {object} $from\r\n\t * @param {object} $to\r\n\t * @param {array} properties\r\n\t */\r\n\tvar transferStyles = function($from, $to, properties) {\r\n\t\tvar i, n, styles = {};\r\n\t\tif (properties) {\r\n\t\t\tfor (i = 0, n = properties.length; i < n; i++) {\r\n\t\t\t\tstyles[properties[i]] = $from.css(properties[i]);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tstyles = $from.css();\r\n\t\t}\r\n\t\t$to.css(styles);\r\n\t};\r\n\t\r\n\t/**\r\n\t * Measures the width of a string within a\r\n\t * parent element (in pixels).\r\n\t *\r\n\t * @param {string} str\r\n\t * @param {object} $parent\r\n\t * @returns {int}\r\n\t */\r\n\tvar measureString = function(str, $parent) {\r\n\t\tif (!str) {\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t\r\n\t\tif (!Selectize.$testInput) {\r\n\t\t\tSelectize.$testInput = $('<span />').css({\r\n\t\t\t\tposition: 'absolute',\r\n\t\t\t\ttop: -99999,\r\n\t\t\t\tleft: -99999,\r\n\t\t\t\twidth: 'auto',\r\n\t\t\t\tpadding: 0,\r\n\t\t\t\twhiteSpace: 'pre'\r\n\t\t\t}).appendTo('body');\r\n\t\t}\r\n\t\r\n\t\tSelectize.$testInput.text(str);\r\n\t\r\n\t\ttransferStyles($parent, Selectize.$testInput, [\r\n\t\t\t'letterSpacing',\r\n\t\t\t'fontSize',\r\n\t\t\t'fontFamily',\r\n\t\t\t'fontWeight',\r\n\t\t\t'textTransform'\r\n\t\t]);\r\n\t\r\n\t\treturn Selectize.$testInput.width();\r\n\t};\r\n\t\r\n\t/**\r\n\t * Sets up an input to grow horizontally as the user\r\n\t * types. If the value is changed manually, you can\r\n\t * trigger the \"update\" handler to resize:\r\n\t *\r\n\t * $input.trigger('update');\r\n\t *\r\n\t * @param {object} $input\r\n\t */\r\n\tvar autoGrow = function($input) {\r\n\t\tvar currentWidth = null;\r\n\t\r\n\t\tvar update = function(e, options) {\r\n\t\t\tvar value, keyCode, printable, placeholder, width;\r\n\t\t\tvar shift, character, selection;\r\n\t\t\te = e || window.event || {};\r\n\t\t\toptions = options || {};\r\n\t\r\n\t\t\tif (e.metaKey || e.altKey) return;\r\n\t\t\tif (!options.force && $input.data('grow') === false) return;\r\n\t\r\n\t\t\tvalue = $input.val();\r\n\t\t\tif (e.type && e.type.toLowerCase() === 'keydown') {\r\n\t\t\t\tkeyCode = e.keyCode;\r\n\t\t\t\tprintable = (\r\n\t\t\t\t\t(keyCode >= 48 && keyCode <= 57)  || // 0-9\r\n\t\t\t\t\t(keyCode >= 65 && keyCode <= 90)   || // a-z\r\n\t\t\t\t\t(keyCode >= 96 && keyCode <= 111)  || // numpad 0-9, numeric operators\r\n\t\t\t\t\t(keyCode >= 186 && keyCode <= 222) || // semicolon, equal, comma, dash, etc.\r\n\t\t\t\t\tkeyCode === 32 // space\r\n\t\t\t\t);\r\n\t\r\n\t\t\t\tif (keyCode === KEY_DELETE || keyCode === KEY_BACKSPACE) {\r\n\t\t\t\t\tselection = getSelection($input[0]);\r\n\t\t\t\t\tif (selection.length) {\r\n\t\t\t\t\t\tvalue = value.substring(0, selection.start) + value.substring(selection.start + selection.length);\r\n\t\t\t\t\t} else if (keyCode === KEY_BACKSPACE && selection.start) {\r\n\t\t\t\t\t\tvalue = value.substring(0, selection.start - 1) + value.substring(selection.start + 1);\r\n\t\t\t\t\t} else if (keyCode === KEY_DELETE && typeof selection.start !== 'undefined') {\r\n\t\t\t\t\t\tvalue = value.substring(0, selection.start) + value.substring(selection.start + 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (printable) {\r\n\t\t\t\t\tshift = e.shiftKey;\r\n\t\t\t\t\tcharacter = String.fromCharCode(e.keyCode);\r\n\t\t\t\t\tif (shift) character = character.toUpperCase();\r\n\t\t\t\t\telse character = character.toLowerCase();\r\n\t\t\t\t\tvalue += character;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\r\n\t\t\tplaceholder = $input.attr('placeholder');\r\n\t\t\tif (!value && placeholder) {\r\n\t\t\t\tvalue = placeholder;\r\n\t\t\t}\r\n\t\r\n\t\t\twidth = measureString(value, $input) + 4;\r\n\t\t\tif (width !== currentWidth) {\r\n\t\t\t\tcurrentWidth = width;\r\n\t\t\t\t$input.width(width);\r\n\t\t\t\t$input.triggerHandler('resize');\r\n\t\t\t}\r\n\t\t};\r\n\t\r\n\t\t$input.on('keydown keyup update blur', update);\r\n\t\tupdate();\r\n\t};\r\n\t\r\n\tvar domToString = function(d) {\r\n\t\tvar tmp = document.createElement('div');\r\n\t\r\n\t\ttmp.appendChild(d.cloneNode(true));\r\n\t\r\n\t\treturn tmp.innerHTML;\r\n\t};\r\n\t\r\n\tvar logError = function(message, options){\r\n\t\tif(!options) options = {};\r\n\t\tvar component = \"Selectize\";\r\n\t\r\n\t\tconsole.error(component + \": \" + message)\r\n\t\r\n\t\tif(options.explanation){\r\n\t\t\t// console.group is undefined in <IE11\r\n\t\t\tif(console.group) console.group();\r\n\t\t\tconsole.error(options.explanation);\r\n\t\t\tif(console.group) console.groupEnd();\r\n\t\t}\r\n\t}\r\n\t\r\n\t\r\n\tvar Selectize = function($input, settings) {\r\n\t\tvar key, i, n, dir, input, self = this;\r\n\t\tinput = $input[0];\r\n\t\tinput.selectize = self;\r\n\t\r\n\t\t// detect rtl environment\r\n\t\tvar computedStyle = window.getComputedStyle && window.getComputedStyle(input, null);\r\n\t\tdir = computedStyle ? computedStyle.getPropertyValue('direction') : input.currentStyle && input.currentStyle.direction;\r\n\t\tdir = dir || $input.parents('[dir]:first').attr('dir') || '';\r\n\t\r\n\t\t// setup default state\r\n\t\t$.extend(self, {\r\n\t\t\torder            : 0,\r\n\t\t\tsettings         : settings,\r\n\t\t\t$input           : $input,\r\n\t\t\ttabIndex         : $input.attr('tabindex') || '',\r\n\t\t\ttagType          : input.tagName.toLowerCase() === 'select' ? TAG_SELECT : TAG_INPUT,\r\n\t\t\trtl              : /rtl/i.test(dir),\r\n\t\r\n\t\t\teventNS          : '.selectize' + (++Selectize.count),\r\n\t\t\thighlightedValue : null,\r\n\t\t\tisBlurring       : false,\r\n\t\t\tisOpen           : false,\r\n\t\t\tisDisabled       : false,\r\n\t\t\tisRequired       : $input.is('[required]'),\r\n\t\t\tisInvalid        : false,\r\n\t\t\tisLocked         : false,\r\n\t\t\tisFocused        : false,\r\n\t\t\tisInputHidden    : false,\r\n\t\t\tisSetup          : false,\r\n\t\t\tisShiftDown      : false,\r\n\t\t\tisCmdDown        : false,\r\n\t\t\tisCtrlDown       : false,\r\n\t\t\tignoreFocus      : false,\r\n\t\t\tignoreBlur       : false,\r\n\t\t\tignoreHover      : false,\r\n\t\t\thasOptions       : false,\r\n\t\t\tcurrentResults   : null,\r\n\t\t\tlastValue        : '',\r\n\t\t\tcaretPos         : 0,\r\n\t\t\tloading          : 0,\r\n\t\t\tloadedSearches   : {},\r\n\t\r\n\t\t\t$activeOption    : null,\r\n\t\t\t$activeItems     : [],\r\n\t\r\n\t\t\toptgroups        : {},\r\n\t\t\toptions          : {},\r\n\t\t\tuserOptions      : {},\r\n\t\t\titems            : [],\r\n\t\t\trenderCache      : {},\r\n\t\t\tonSearchChange   : settings.loadThrottle === null ? self.onSearchChange : debounce(self.onSearchChange, settings.loadThrottle)\r\n\t\t});\r\n\t\r\n\t\t// search system\r\n\t\tself.sifter = new Sifter(this.options, {diacritics: settings.diacritics});\r\n\t\r\n\t\t// build options table\r\n\t\tif (self.settings.options) {\r\n\t\t\tfor (i = 0, n = self.settings.options.length; i < n; i++) {\r\n\t\t\t\tself.registerOption(self.settings.options[i]);\r\n\t\t\t}\r\n\t\t\tdelete self.settings.options;\r\n\t\t}\r\n\t\r\n\t\t// build optgroup table\r\n\t\tif (self.settings.optgroups) {\r\n\t\t\tfor (i = 0, n = self.settings.optgroups.length; i < n; i++) {\r\n\t\t\t\tself.registerOptionGroup(self.settings.optgroups[i]);\r\n\t\t\t}\r\n\t\t\tdelete self.settings.optgroups;\r\n\t\t}\r\n\t\r\n\t\t// option-dependent defaults\r\n\t\tself.settings.mode = self.settings.mode || (self.settings.maxItems === 1 ? 'single' : 'multi');\r\n\t\tif (typeof self.settings.hideSelected !== 'boolean') {\r\n\t\t\tself.settings.hideSelected = self.settings.mode === 'multi';\r\n\t\t}\r\n\t\r\n\t\tself.initializePlugins(self.settings.plugins);\r\n\t\tself.setupCallbacks();\r\n\t\tself.setupTemplates();\r\n\t\tself.setup();\r\n\t};\r\n\t\r\n\t// mixins\r\n\t// - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\r\n\t\r\n\tMicroEvent.mixin(Selectize);\r\n\t\r\n\tif(typeof MicroPlugin !== \"undefined\"){\r\n\t\tMicroPlugin.mixin(Selectize);\r\n\t}else{\r\n\t\tlogError(\"Dependency MicroPlugin is missing\",\r\n\t\t\t{explanation:\r\n\t\t\t\t\"Make sure you either: (1) are using the \\\"standalone\\\" \"+\r\n\t\t\t\t\"version of Selectize, or (2) require MicroPlugin before you \"+\r\n\t\t\t\t\"load Selectize.\"}\r\n\t\t);\r\n\t}\r\n\t\r\n\t\r\n\t// methods\r\n\t// - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -\r\n\t\r\n\t$.extend(Selectize.prototype, {\r\n\t\r\n\t\t/**\r\n\t\t * Creates all elements and sets up event bindings.\r\n\t\t */\r\n\t\tsetup: function() {\r\n\t\t\tvar self      = this;\r\n\t\t\tvar settings  = self.settings;\r\n\t\t\tvar eventNS   = self.eventNS;\r\n\t\t\tvar $window   = $(window);\r\n\t\t\tvar $document = $(document);\r\n\t\t\tvar $input    = self.$input;\r\n\t\r\n\t\t\tvar $wrapper;\r\n\t\t\tvar $control;\r\n\t\t\tvar $control_input;\r\n\t\t\tvar $dropdown;\r\n\t\t\tvar $dropdown_content;\r\n\t\t\tvar $dropdown_parent;\r\n\t\t\tvar inputMode;\r\n\t\t\tvar timeout_blur;\r\n\t\t\tvar timeout_focus;\r\n\t\t\tvar classes;\r\n\t\t\tvar classes_plugins;\r\n\t\t\tvar inputId;\r\n\t\r\n\t\t\tinputMode         = self.settings.mode;\r\n\t\t\tclasses           = $input.attr('class') || '';\r\n\t\r\n\t\t\t$wrapper          = $('<div>').addClass(settings.wrapperClass).addClass(classes).addClass(inputMode);\r\n\t\t\t$control          = $('<div>').addClass(settings.inputClass).addClass('items').appendTo($wrapper);\r\n\t\t\t$control_input    = $('<input type=\"text\" autocomplete=\"off\" />').appendTo($control).attr('tabindex', $input.is(':disabled') ? '-1' : self.tabIndex);\r\n\t\t\t$dropdown_parent  = $(settings.dropdownParent || $wrapper);\r\n\t\t\t$dropdown         = $('<div>').addClass(settings.dropdownClass).addClass(inputMode).hide().appendTo($dropdown_parent);\r\n\t\t\t$dropdown_content = $('<div>').addClass(settings.dropdownContentClass).appendTo($dropdown);\r\n\t\r\n\t\t\tif(inputId = $input.attr('id')) {\r\n\t\t\t\t$control_input.attr('id', inputId + '-selectized');\r\n\t\t\t\t$(\"label[for='\"+inputId+\"']\").attr('for', inputId + '-selectized');\r\n\t\t\t}\r\n\t\r\n\t\t\tif(self.settings.copyClassesToDropdown) {\r\n\t\t\t\t$dropdown.addClass(classes);\r\n\t\t\t}\r\n\t\r\n\t\t\t$wrapper.css({\r\n\t\t\t\twidth: $input[0].style.width\r\n\t\t\t});\r\n\t\r\n\t\t\tif (self.plugins.names.length) {\r\n\t\t\t\tclasses_plugins = 'plugin-' + self.plugins.names.join(' plugin-');\r\n\t\t\t\t$wrapper.addClass(classes_plugins);\r\n\t\t\t\t$dropdown.addClass(classes_plugins);\r\n\t\t\t}\r\n\t\r\n\t\t\tif ((settings.maxItems === null || settings.maxItems > 1) && self.tagType === TAG_SELECT) {\r\n\t\t\t\t$input.attr('multiple', 'multiple');\r\n\t\t\t}\r\n\t\r\n\t\t\tif (self.settings.placeholder) {\r\n\t\t\t\t$control_input.attr('placeholder', settings.placeholder);\r\n\t\t\t}\r\n\t\r\n\t\t\t// if splitOn was not passed in, construct it from the delimiter to allow pasting universally\r\n\t\t\tif (!self.settings.splitOn && self.settings.delimiter) {\r\n\t\t\t\tvar delimiterEscaped = self.settings.delimiter.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\r\n\t\t\t\tself.settings.splitOn = new RegExp('\\\\s*' + delimiterEscaped + '+\\\\s*');\r\n\t\t\t}\r\n\t\r\n\t\t\tif ($input.attr('autocorrect')) {\r\n\t\t\t\t$control_input.attr('autocorrect', $input.attr('autocorrect'));\r\n\t\t\t}\r\n\t\r\n\t\t\tif ($input.attr('autocapitalize')) {\r\n\t\t\t\t$control_input.attr('autocapitalize', $input.attr('autocapitalize'));\r\n\t\t\t}\r\n\t\t\t$control_input[0].type = $input[0].type;\r\n\t\r\n\t\t\tself.$wrapper          = $wrapper;\r\n\t\t\tself.$control          = $control;\r\n\t\t\tself.$control_input    = $control_input;\r\n\t\t\tself.$dropdown         = $dropdown;\r\n\t\t\tself.$dropdown_content = $dropdown_content;\r\n\t\r\n\t\t\t$dropdown.on('mouseenter mousedown click', '[data-disabled]>[data-selectable]', function(e) { e.stopImmediatePropagation(); });\r\n\t\t\t$dropdown.on('mouseenter', '[data-selectable]', function() { return self.onOptionHover.apply(self, arguments); });\r\n\t\t\t$dropdown.on('mousedown click', '[data-selectable]', function() { return self.onOptionSelect.apply(self, arguments); });\r\n\t\t\twatchChildEvent($control, 'mousedown', '*:not(input)', function() { return self.onItemSelect.apply(self, arguments); });\r\n\t\t\tautoGrow($control_input);\r\n\t\r\n\t\t\t$control.on({\r\n\t\t\t\tmousedown : function() { return self.onMouseDown.apply(self, arguments); },\r\n\t\t\t\tclick     : function() { return self.onClick.apply(self, arguments); }\r\n\t\t\t});\r\n\t\r\n\t\t\t$control_input.on({\r\n\t\t\t\tmousedown : function(e) { e.stopPropagation(); },\r\n\t\t\t\tkeydown   : function() { return self.onKeyDown.apply(self, arguments); },\r\n\t\t\t\tkeyup     : function() { return self.onKeyUp.apply(self, arguments); },\r\n\t\t\t\tkeypress  : function() { return self.onKeyPress.apply(self, arguments); },\r\n\t\t\t\tresize    : function() { self.positionDropdown.apply(self, []); },\r\n\t\t\t\tblur      : function() { return self.onBlur.apply(self, arguments); },\r\n\t\t\t\tfocus     : function() { self.ignoreBlur = false; return self.onFocus.apply(self, arguments); },\r\n\t\t\t\tpaste     : function() { return self.onPaste.apply(self, arguments); }\r\n\t\t\t});\r\n\t\r\n\t\t\t$document.on('keydown' + eventNS, function(e) {\r\n\t\t\t\tself.isCmdDown = e[IS_MAC ? 'metaKey' : 'ctrlKey'];\r\n\t\t\t\tself.isCtrlDown = e[IS_MAC ? 'altKey' : 'ctrlKey'];\r\n\t\t\t\tself.isShiftDown = e.shiftKey;\r\n\t\t\t});\r\n\t\r\n\t\t\t$document.on('keyup' + eventNS, function(e) {\r\n\t\t\t\tif (e.keyCode === KEY_CTRL) self.isCtrlDown = false;\r\n\t\t\t\tif (e.keyCode === KEY_SHIFT) self.isShiftDown = false;\r\n\t\t\t\tif (e.keyCode === KEY_CMD) self.isCmdDown = false;\r\n\t\t\t});\r\n\t\r\n\t\t\t$document.on('mousedown' + eventNS, function(e) {\r\n\t\t\t\tif (self.isFocused) {\r\n\t\t\t\t\t// prevent events on the dropdown scrollbar from causing the control to blur\r\n\t\t\t\t\tif (e.target === self.$dropdown[0] || e.target.parentNode === self.$dropdown[0]) {\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// blur on click outside\r\n\t\t\t\t\tif (!self.$control.has(e.target).length && e.target !== self.$control[0]) {\r\n\t\t\t\t\t\tself.blur(e.target);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\r\n\t\t\t$window.on(['scroll' + eventNS, 'resize' + eventNS].join(' '), function() {\r\n\t\t\t\tif (self.isOpen) {\r\n\t\t\t\t\tself.positionDropdown.apply(self, arguments);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t$window.on('mousemove' + eventNS, function() {\r\n\t\t\t\tself.ignoreHover = false;\r\n\t\t\t});\r\n\t\r\n\t\t\t// store original children and tab index so that they can be\r\n\t\t\t// restored when the destroy() method is called.\r\n\t\t\tthis.revertSettings = {\r\n\t\t\t\t$children : $input.children().detach(),\r\n\t\t\t\ttabindex  : $input.attr('tabindex')\r\n\t\t\t};\r\n\t\r\n\t\t\t$input.attr('tabindex', -1).hide().after(self.$wrapper);\r\n\t\r\n\t\t\tif ($.isArray(settings.items)) {\r\n\t\t\t\tself.setValue(settings.items);\r\n\t\t\t\tdelete settings.items;\r\n\t\t\t}\r\n\t\r\n\t\t\t// feature detect for the validation API\r\n\t\t\tif (SUPPORTS_VALIDITY_API) {\r\n\t\t\t\t$input.on('invalid' + eventNS, function(e) {\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\tself.isInvalid = true;\r\n\t\t\t\t\tself.refreshState();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\r\n\t\t\tself.updateOriginalInput();\r\n\t\t\tself.refreshItems();\r\n\t\t\tself.refreshState();\r\n\t\t\tself.updatePlaceholder();\r\n\t\t\tself.isSetup = true;\r\n\t\r\n\t\t\tif ($input.is(':disabled')) {\r\n\t\t\t\tself.disable();\r\n\t\t\t}\r\n\t\r\n\t\t\tself.on('change', this.onChange);\r\n\t\r\n\t\t\t$input.data('selectize', self);\r\n\t\t\t$input.addClass('selectized');\r\n\t\t\tself.trigger('initialize');\r\n\t\r\n\t\t\t// preload options\r\n\t\t\tif (settings.preload === true) {\r\n\t\t\t\tself.onSearchChange('');\r\n\t\t\t}\r\n\t\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * Sets up default rendering functions.\r\n\t\t */\r\n\t\tsetupTemplates: function() {\r\n\t\t\tvar self = this;\r\n\t\t\tvar field_label = self.settings.labelField;\r\n\t\t\tvar field_optgroup = self.settings.optgroupLabelField;\r\n\t\r\n\t\t\tvar templates = {\r\n\t\t\t\t'optgroup': function(data) {\r\n\t\t\t\t\treturn '<div class=\"optgroup\">' + data.html + '</div>';\r\n\t\t\t\t},\r\n\t\t\t\t'optgroup_header': function(data, escape) {\r\n\t\t\t\t\treturn '<div class=\"optgroup-header\">' + escape(data[field_optgroup]) + '</div>';\r\n\t\t\t\t},\r\n\t\t\t\t'option': function(data, escape) {\r\n\t\t\t\t\treturn '<div class=\"option\">' + escape(data[field_label]) + '</div>';\r\n\t\t\t\t},\r\n\t\t\t\t'item': function(data, escape) {\r\n\t\t\t\t\treturn '<div class=\"item\">' + escape(data[field_label]) + '</div>';\r\n\t\t\t\t},\r\n\t\t\t\t'option_create': function(data, escape) {\r\n\t\t\t\t\treturn '<div class=\"create\">Add <strong>' + escape(data.input) + '</strong>&hellip;</div>';\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\r\n\t\t\tself.settings.render = $.extend({}, templates, self.settings.render);\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * Maps fired events to callbacks provided\r\n\t\t * in the settings used when creating the control.\r\n\t\t */\r\n\t\tsetupCallbacks: function() {\r\n\t\t\tvar key, fn, callbacks = {\r\n\t\t\t\t'initialize'      : 'onInitialize',\r\n\t\t\t\t'change'          : 'onChange',\r\n\t\t\t\t'item_add'        : 'onItemAdd',\r\n\t\t\t\t'item_remove'     : 'onItemRemove',\r\n\t\t\t\t'clear'           : 'onClear',\r\n\t\t\t\t'option_add'      : 'onOptionAdd',\r\n\t\t\t\t'option_remove'   : 'onOptionRemove',\r\n\t\t\t\t'option_clear'    : 'onOptionClear',\r\n\t\t\t\t'optgroup_add'    : 'onOptionGroupAdd',\r\n\t\t\t\t'optgroup_remove' : 'onOptionGroupRemove',\r\n\t\t\t\t'optgroup_clear'  : 'onOptionGroupClear',\r\n\t\t\t\t'dropdown_open'   : 'onDropdownOpen',\r\n\t\t\t\t'dropdown_close'  : 'onDropdownClose',\r\n\t\t\t\t'type'            : 'onType',\r\n\t\t\t\t'load'            : 'onLoad',\r\n\t\t\t\t'focus'           : 'onFocus',\r\n\t\t\t\t'blur'            : 'onBlur'\r\n\t\t\t};\r\n\t\r\n\t\t\tfor (key in callbacks) {\r\n\t\t\t\tif (callbacks.hasOwnProperty(key)) {\r\n\t\t\t\t\tfn = this.settings[callbacks[key]];\r\n\t\t\t\t\tif (fn) this.on(key, fn);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * Triggered when the main control element\r\n\t\t * has a click event.\r\n\t\t *\r\n\t\t * @param {object} e\r\n\t\t * @return {boolean}\r\n\t\t */\r\n\t\tonClick: function(e) {\r\n\t\t\tvar self = this;\r\n\t\r\n\t\t\t// necessary for mobile webkit devices (manual focus triggering\r\n\t\t\t// is ignored unless invoked within a click event)\r\n\t    // also necessary to reopen a dropdown that has been closed by\r\n\t    // closeAfterSelect\r\n\t\t\tif (!self.isFocused || !self.isOpen) {\r\n\t\t\t\tself.focus();\r\n\t\t\t\te.preventDefault();\r\n\t\t\t}\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * Triggered when the main control element\r\n\t\t * has a mouse down event.\r\n\t\t *\r\n\t\t * @param {object} e\r\n\t\t * @return {boolean}\r\n\t\t */\r\n\t\tonMouseDown: function(e) {\r\n\t\t\tvar self = this;\r\n\t\t\tvar defaultPrevented = e.isDefaultPrevented();\r\n\t\t\tvar $target = $(e.target);\r\n\t\r\n\t\t\tif (self.isFocused) {\r\n\t\t\t\t// retain focus by preventing native handling. if the\r\n\t\t\t\t// event target is the input it should not be modified.\r\n\t\t\t\t// otherwise, text selection within the input won't work.\r\n\t\t\t\tif (e.target !== self.$control_input[0]) {\r\n\t\t\t\t\tif (self.settings.mode === 'single') {\r\n\t\t\t\t\t\t// toggle dropdown\r\n\t\t\t\t\t\tself.isOpen ? self.close() : self.open();\r\n\t\t\t\t\t} else if (!defaultPrevented) {\r\n\t\t\t\t\t\tself.setActiveItem(null);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\t// give control focus\r\n\t\t\t\tif (!defaultPrevented) {\r\n\t\t\t\t\twindow.setTimeout(function() {\r\n\t\t\t\t\t\tself.focus();\r\n\t\t\t\t\t}, 0);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * Triggered when the value of the control has been changed.\r\n\t\t * This should propagate the event to the original DOM\r\n\t\t * input / select element.\r\n\t\t */\r\n\t\tonChange: function() {\r\n\t\t\tthis.$input.trigger('change');\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * Triggered on <input> paste.\r\n\t\t *\r\n\t\t * @param {object} e\r\n\t\t * @returns {boolean}\r\n\t\t */\r\n\t\tonPaste: function(e) {\r\n\t\t\tvar self = this;\r\n\t\r\n\t\t\tif (self.isFull() || self.isInputHidden || self.isLocked) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\r\n\t\t\t// If a regex or string is included, this will split the pasted\r\n\t\t\t// input and create Items for each separate value\r\n\t\t\tif (self.settings.splitOn) {\r\n\t\r\n\t\t\t\t// Wait for pasted text to be recognized in value\r\n\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\tvar pastedText = self.$control_input.val();\r\n\t\t\t\t\tif(!pastedText.match(self.settings.splitOn)){ return }\r\n\t\r\n\t\t\t\t\tvar splitInput = $.trim(pastedText).split(self.settings.splitOn);\r\n\t\t\t\t\tfor (var i = 0, n = splitInput.length; i < n; i++) {\r\n\t\t\t\t\t\tself.createItem(splitInput[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 0);\r\n\t\t\t}\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * Triggered on <input> keypress.\r\n\t\t *\r\n\t\t * @param {object} e\r\n\t\t * @returns {boolean}\r\n\t\t */\r\n\t\tonKeyPress: function(e) {\r\n\t\t\tif (this.isLocked) return e && e.preventDefault();\r\n\t\t\tvar character = String.fromCharCode(e.keyCode || e.which);\r\n\t\t\tif (this.settings.create && this.settings.mode === 'multi' && character === this.settings.delimiter) {\r\n\t\t\t\tthis.createItem();\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * Triggered on <input> keydown.\r\n\t\t *\r\n\t\t * @param {object} e\r\n\t\t * @returns {boolean}\r\n\t\t */\r\n\t\tonKeyDown: function(e) {\r\n\t\t\tvar isInput = e.target === this.$control_input[0];\r\n\t\t\tvar self = this;\r\n\t\r\n\t\t\tif (self.isLocked) {\r\n\t\t\t\tif (e.keyCode !== KEY_TAB) {\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t}\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\r\n\t\t\tswitch (e.keyCode) {\r\n\t\t\t\tcase KEY_A:\r\n\t\t\t\t\tif (self.isCmdDown) {\r\n\t\t\t\t\t\tself.selectAll();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase KEY_ESC:\r\n\t\t\t\t\tif (self.isOpen) {\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\tself.close();\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn;\r\n\t\t\t\tcase KEY_N:\r\n\t\t\t\t\tif (!e.ctrlKey || e.altKey) break;\r\n\t\t\t\tcase KEY_DOWN:\r\n\t\t\t\t\tif (!self.isOpen && self.hasOptions) {\r\n\t\t\t\t\t\tself.open();\r\n\t\t\t\t\t} else if (self.$activeOption) {\r\n\t\t\t\t\t\tself.ignoreHover = true;\r\n\t\t\t\t\t\tvar $next = self.getAdjacentOption(self.$activeOption, 1);\r\n\t\t\t\t\t\tif ($next.length) self.setActiveOption($next, true, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\treturn;\r\n\t\t\t\tcase KEY_P:\r\n\t\t\t\t\tif (!e.ctrlKey || e.altKey) break;\r\n\t\t\t\tcase KEY_UP:\r\n\t\t\t\t\tif (self.$activeOption) {\r\n\t\t\t\t\t\tself.ignoreHover = true;\r\n\t\t\t\t\t\tvar $prev = self.getAdjacentOption(self.$activeOption, -1);\r\n\t\t\t\t\t\tif ($prev.length) self.setActiveOption($prev, true, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\treturn;\r\n\t\t\t\tcase KEY_RETURN:\r\n\t\t\t\t\tif (self.isOpen && self.$activeOption) {\r\n\t\t\t\t\t\tself.onOptionSelect({currentTarget: self.$activeOption});\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn;\r\n\t\t\t\tcase KEY_LEFT:\r\n\t\t\t\t\tself.advanceSelection(-1, e);\r\n\t\t\t\t\treturn;\r\n\t\t\t\tcase KEY_RIGHT:\r\n\t\t\t\t\tself.advanceSelection(1, e);\r\n\t\t\t\t\treturn;\r\n\t\t\t\tcase KEY_TAB:\r\n\t\t\t\t\tif (self.settings.selectOnTab && self.isOpen && self.$activeOption) {\r\n\t\t\t\t\t\tself.onOptionSelect({currentTarget: self.$activeOption});\r\n\t\r\n\t\t\t\t\t\t// Default behaviour is to jump to the next field, we only want this\r\n\t\t\t\t\t\t// if the current field doesn't accept any more entries\r\n\t\t\t\t\t\tif (!self.isFull()) {\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (self.settings.create && self.createItem()) {\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn;\r\n\t\t\t\tcase KEY_BACKSPACE:\r\n\t\t\t\tcase KEY_DELETE:\r\n\t\t\t\t\tself.deleteSelection(e);\r\n\t\t\t\t\treturn;\r\n\t\t\t}\r\n\t\r\n\t\t\tif ((self.isFull() || self.isInputHidden) && !(IS_MAC ? e.metaKey : e.ctrlKey)) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * Triggered on <input> keyup.\r\n\t\t *\r\n\t\t * @param {object} e\r\n\t\t * @returns {boolean}\r\n\t\t */\r\n\t\tonKeyUp: function(e) {\r\n\t\t\tvar self = this;\r\n\t\r\n\t\t\tif (self.isLocked) return e && e.preventDefault();\r\n\t\t\tvar value = self.$control_input.val() || '';\r\n\t\t\tif (self.lastValue !== value) {\r\n\t\t\t\tself.lastValue = value;\r\n\t\t\t\tself.onSearchChange(value);\r\n\t\t\t\tself.refreshOptions();\r\n\t\t\t\tself.trigger('type', value);\r\n\t\t\t}\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * Invokes the user-provide option provider / loader.\r\n\t\t *\r\n\t\t * Note: this function is debounced in the Selectize\r\n\t\t * constructor (by `settings.loadThrottle` milliseconds)\r\n\t\t *\r\n\t\t * @param {string} value\r\n\t\t */\r\n\t\tonSearchChange: function(value) {\r\n\t\t\tvar self = this;\r\n\t\t\tvar fn = self.settings.load;\r\n\t\t\tif (!fn) return;\r\n\t\t\tif (self.loadedSearches.hasOwnProperty(value)) return;\r\n\t\t\tself.loadedSearches[value] = true;\r\n\t\t\tself.load(function(callback) {\r\n\t\t\t\tfn.apply(self, [value, callback]);\r\n\t\t\t});\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * Triggered on <input> focus.\r\n\t\t *\r\n\t\t * @param {object} e (optional)\r\n\t\t * @returns {boolean}\r\n\t\t */\r\n\t\tonFocus: function(e) {\r\n\t\t\tvar self = this;\r\n\t\t\tvar wasFocused = self.isFocused;\r\n\t\r\n\t\t\tif (self.isDisabled) {\r\n\t\t\t\tself.blur();\r\n\t\t\t\te && e.preventDefault();\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\r\n\t\t\tif (self.ignoreFocus) return;\r\n\t\t\tself.isFocused = true;\r\n\t\t\tif (self.settings.preload === 'focus') self.onSearchChange('');\r\n\t\r\n\t\t\tif (!wasFocused) self.trigger('focus');\r\n\t\r\n\t\t\tif (!self.$activeItems.length) {\r\n\t\t\t\tself.showInput();\r\n\t\t\t\tself.setActiveItem(null);\r\n\t\t\t\tself.refreshOptions(!!self.settings.openOnFocus);\r\n\t\t\t}\r\n\t\r\n\t\t\tself.refreshState();\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * Triggered on <input> blur.\r\n\t\t *\r\n\t\t * @param {object} e\r\n\t\t * @param {Element} dest\r\n\t\t */\r\n\t\tonBlur: function(e, dest) {\r\n\t\t\tvar self = this;\r\n\t\t\tif (!self.isFocused) return;\r\n\t\t\tself.isFocused = false;\r\n\t\r\n\t\t\tif (self.ignoreFocus) {\r\n\t\t\t\treturn;\r\n\t\t\t} else if (!self.ignoreBlur && document.activeElement === self.$dropdown_content[0]) {\r\n\t\t\t\t// necessary to prevent IE closing the dropdown when the scrollbar is clicked\r\n\t\t\t\tself.ignoreBlur = true;\r\n\t\t\t\tself.onFocus(e);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\r\n\t\t\tvar deactivate = function() {\r\n\t\t\t\tself.close();\r\n\t\t\t\tself.setTextboxValue('');\r\n\t\t\t\tself.setActiveItem(null);\r\n\t\t\t\tself.setActiveOption(null);\r\n\t\t\t\tself.setCaret(self.items.length);\r\n\t\t\t\tself.refreshState();\r\n\t\r\n\t\t\t\t// IE11 bug: element still marked as active\r\n\t\t\t\tdest && dest.focus && dest.focus();\r\n\t\r\n\t\t\t\tself.isBlurring = false;\r\n\t\t\t\tself.ignoreFocus = false;\r\n\t\t\t\tself.trigger('blur');\r\n\t\t\t};\r\n\t\r\n\t\t\tself.isBlurring = true;\r\n\t\t\tself.ignoreFocus = true;\r\n\t\t\tif (self.settings.create && self.settings.createOnBlur) {\r\n\t\t\t\tself.createItem(null, false, deactivate);\r\n\t\t\t} else {\r\n\t\t\t\tdeactivate();\r\n\t\t\t}\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * Triggered when the user rolls over\r\n\t\t * an option in the autocomplete dropdown menu.\r\n\t\t *\r\n\t\t * @param {object} e\r\n\t\t * @returns {boolean}\r\n\t\t */\r\n\t\tonOptionHover: function(e) {\r\n\t\t\tif (this.ignoreHover) return;\r\n\t\t\tthis.setActiveOption(e.currentTarget, false);\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * Triggered when the user clicks on an option\r\n\t\t * in the autocomplete dropdown menu.\r\n\t\t *\r\n\t\t * @param {object} e\r\n\t\t * @returns {boolean}\r\n\t\t */\r\n\t\tonOptionSelect: function(e) {\r\n\t\t\tvar value, $target, $option, self = this;\r\n\t\r\n\t\t\tif (e.preventDefault) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t}\r\n\t\r\n\t\t\t$target = $(e.currentTarget);\r\n\t\t\tif ($target.hasClass('create')) {\r\n\t\t\t\tself.createItem(null, function() {\r\n\t\t\t\t\tif (self.settings.closeAfterSelect) {\r\n\t\t\t\t\t\tself.close();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tvalue = $target.attr('data-value');\r\n\t\t\t\tif (typeof value !== 'undefined') {\r\n\t\t\t\t\tself.lastQuery = null;\r\n\t\t\t\t\tself.setTextboxValue('');\r\n\t\t\t\t\tself.addItem(value);\r\n\t\t\t\t\tif (self.settings.closeAfterSelect) {\r\n\t\t\t\t\t\tself.close();\r\n\t\t\t\t\t} else if (!self.settings.hideSelected && e.type && /mouse/.test(e.type)) {\r\n\t\t\t\t\t\tself.setActiveOption(self.getOption(value));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * Triggered when the user clicks on an item\r\n\t\t * that has been selected.\r\n\t\t *\r\n\t\t * @param {object} e\r\n\t\t * @returns {boolean}\r\n\t\t */\r\n\t\tonItemSelect: function(e) {\r\n\t\t\tvar self = this;\r\n\t\r\n\t\t\tif (self.isLocked) return;\r\n\t\t\tif (self.settings.mode === 'multi') {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tself.setActiveItem(e.currentTarget, e);\r\n\t\t\t}\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * Invokes the provided method that provides\r\n\t\t * results to a callback---which are then added\r\n\t\t * as options to the control.\r\n\t\t *\r\n\t\t * @param {function} fn\r\n\t\t */\r\n\t\tload: function(fn) {\r\n\t\t\tvar self = this;\r\n\t\t\tvar $wrapper = self.$wrapper.addClass(self.settings.loadingClass);\r\n\t\r\n\t\t\tself.loading++;\r\n\t\t\tfn.apply(self, [function(results) {\r\n\t\t\t\tself.loading = Math.max(self.loading - 1, 0);\r\n\t\t\t\tif (results && results.length) {\r\n\t\t\t\t\tself.addOption(results);\r\n\t\t\t\t\tself.refreshOptions(self.isFocused && !self.isInputHidden);\r\n\t\t\t\t}\r\n\t\t\t\tif (!self.loading) {\r\n\t\t\t\t\t$wrapper.removeClass(self.settings.loadingClass);\r\n\t\t\t\t}\r\n\t\t\t\tself.trigger('load', results);\r\n\t\t\t}]);\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * Sets the input field of the control to the specified value.\r\n\t\t *\r\n\t\t * @param {string} value\r\n\t\t */\r\n\t\tsetTextboxValue: function(value) {\r\n\t\t\tvar $input = this.$control_input;\r\n\t\t\tvar changed = $input.val() !== value;\r\n\t\t\tif (changed) {\r\n\t\t\t\t$input.val(value).triggerHandler('update');\r\n\t\t\t\tthis.lastValue = value;\r\n\t\t\t}\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * Returns the value of the control. If multiple items\r\n\t\t * can be selected (e.g. <select multiple>), this returns\r\n\t\t * an array. If only one item can be selected, this\r\n\t\t * returns a string.\r\n\t\t *\r\n\t\t * @returns {mixed}\r\n\t\t */\r\n\t\tgetValue: function() {\r\n\t\t\tif (this.tagType === TAG_SELECT && this.$input.attr('multiple')) {\r\n\t\t\t\treturn this.items;\r\n\t\t\t} else {\r\n\t\t\t\treturn this.items.join(this.settings.delimiter);\r\n\t\t\t}\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * Resets the selected items to the given value.\r\n\t\t *\r\n\t\t * @param {mixed} value\r\n\t\t */\r\n\t\tsetValue: function(value, silent) {\r\n\t\t\tvar events = silent ? [] : ['change'];\r\n\t\r\n\t\t\tdebounce_events(this, events, function() {\r\n\t\t\t\tthis.clear(silent);\r\n\t\t\t\tthis.addItems(value, silent);\r\n\t\t\t});\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * Sets the selected item.\r\n\t\t *\r\n\t\t * @param {object} $item\r\n\t\t * @param {object} e (optional)\r\n\t\t */\r\n\t\tsetActiveItem: function($item, e) {\r\n\t\t\tvar self = this;\r\n\t\t\tvar eventName;\r\n\t\t\tvar i, idx, begin, end, item, swap;\r\n\t\t\tvar $last;\r\n\t\r\n\t\t\tif (self.settings.mode === 'single') return;\r\n\t\t\t$item = $($item);\r\n\t\r\n\t\t\t// clear the active selection\r\n\t\t\tif (!$item.length) {\r\n\t\t\t\t$(self.$activeItems).removeClass('active');\r\n\t\t\t\tself.$activeItems = [];\r\n\t\t\t\tif (self.isFocused) {\r\n\t\t\t\t\tself.showInput();\r\n\t\t\t\t}\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\r\n\t\t\t// modify selection\r\n\t\t\teventName = e && e.type.toLowerCase();\r\n\t\r\n\t\t\tif (eventName === 'mousedown' && self.isShiftDown && self.$activeItems.length) {\r\n\t\t\t\t$last = self.$control.children('.active:last');\r\n\t\t\t\tbegin = Array.prototype.indexOf.apply(self.$control[0].childNodes, [$last[0]]);\r\n\t\t\t\tend   = Array.prototype.indexOf.apply(self.$control[0].childNodes, [$item[0]]);\r\n\t\t\t\tif (begin > end) {\r\n\t\t\t\t\tswap  = begin;\r\n\t\t\t\t\tbegin = end;\r\n\t\t\t\t\tend   = swap;\r\n\t\t\t\t}\r\n\t\t\t\tfor (i = begin; i <= end; i++) {\r\n\t\t\t\t\titem = self.$control[0].childNodes[i];\r\n\t\t\t\t\tif (self.$activeItems.indexOf(item) === -1) {\r\n\t\t\t\t\t\t$(item).addClass('active');\r\n\t\t\t\t\t\tself.$activeItems.push(item);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\te.preventDefault();\r\n\t\t\t} else if ((eventName === 'mousedown' && self.isCtrlDown) || (eventName === 'keydown' && this.isShiftDown)) {\r\n\t\t\t\tif ($item.hasClass('active')) {\r\n\t\t\t\t\tidx = self.$activeItems.indexOf($item[0]);\r\n\t\t\t\t\tself.$activeItems.splice(idx, 1);\r\n\t\t\t\t\t$item.removeClass('active');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tself.$activeItems.push($item.addClass('active')[0]);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\t$(self.$activeItems).removeClass('active');\r\n\t\t\t\tself.$activeItems = [$item.addClass('active')[0]];\r\n\t\t\t}\r\n\t\r\n\t\t\t// ensure control has focus\r\n\t\t\tself.hideInput();\r\n\t\t\tif (!this.isFocused) {\r\n\t\t\t\tself.focus();\r\n\t\t\t}\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * Sets the selected item in the dropdown menu\r\n\t\t * of available options.\r\n\t\t *\r\n\t\t * @param {object} $object\r\n\t\t * @param {boolean} scroll\r\n\t\t * @param {boolean} animate\r\n\t\t */\r\n\t\tsetActiveOption: function($option, scroll, animate) {\r\n\t\t\tvar height_menu, height_item, y;\r\n\t\t\tvar scroll_top, scroll_bottom;\r\n\t\t\tvar self = this;\r\n\t\r\n\t\t\tif (self.$activeOption) self.$activeOption.removeClass('active');\r\n\t\t\tself.$activeOption = null;\r\n\t\r\n\t\t\t$option = $($option);\r\n\t\t\tif (!$option.length) return;\r\n\t\r\n\t\t\tself.$activeOption = $option.addClass('active');\r\n\t\r\n\t\t\tif (scroll || !isset(scroll)) {\r\n\t\r\n\t\t\t\theight_menu   = self.$dropdown_content.height();\r\n\t\t\t\theight_item   = self.$activeOption.outerHeight(true);\r\n\t\t\t\tscroll        = self.$dropdown_content.scrollTop() || 0;\r\n\t\t\t\ty             = self.$activeOption.offset().top - self.$dropdown_content.offset().top + scroll;\r\n\t\t\t\tscroll_top    = y;\r\n\t\t\t\tscroll_bottom = y - height_menu + height_item;\r\n\t\r\n\t\t\t\tif (y + height_item > height_menu + scroll) {\r\n\t\t\t\t\tself.$dropdown_content.stop().animate({scrollTop: scroll_bottom}, animate ? self.settings.scrollDuration : 0);\r\n\t\t\t\t} else if (y < scroll) {\r\n\t\t\t\t\tself.$dropdown_content.stop().animate({scrollTop: scroll_top}, animate ? self.settings.scrollDuration : 0);\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * Selects all items (CTRL + A).\r\n\t\t */\r\n\t\tselectAll: function() {\r\n\t\t\tvar self = this;\r\n\t\t\tif (self.settings.mode === 'single') return;\r\n\t\r\n\t\t\tself.$activeItems = Array.prototype.slice.apply(self.$control.children(':not(input)').addClass('active'));\r\n\t\t\tif (self.$activeItems.length) {\r\n\t\t\t\tself.hideInput();\r\n\t\t\t\tself.close();\r\n\t\t\t}\r\n\t\t\tself.focus();\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * Hides the input element out of view, while\r\n\t\t * retaining its focus.\r\n\t\t */\r\n\t\thideInput: function() {\r\n\t\t\tvar self = this;\r\n\t\r\n\t\t\tself.setTextboxValue('');\r\n\t\t\tself.$control_input.css({opacity: 0, position: 'absolute', left: self.rtl ? 10000 : -10000});\r\n\t\t\tself.isInputHidden = true;\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * Restores input visibility.\r\n\t\t */\r\n\t\tshowInput: function() {\r\n\t\t\tthis.$control_input.css({opacity: 1, position: 'relative', left: 0});\r\n\t\t\tthis.isInputHidden = false;\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * Gives the control focus.\r\n\t\t */\r\n\t\tfocus: function() {\r\n\t\t\tvar self = this;\r\n\t\t\tif (self.isDisabled) return;\r\n\t\r\n\t\t\tself.ignoreFocus = true;\r\n\t\t\tself.$control_input[0].focus();\r\n\t\t\twindow.setTimeout(function() {\r\n\t\t\t\tself.ignoreFocus = false;\r\n\t\t\t\tself.onFocus();\r\n\t\t\t}, 0);\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * Forces the control out of focus.\r\n\t\t *\r\n\t\t * @param {Element} dest\r\n\t\t */\r\n\t\tblur: function(dest) {\r\n\t\t\tthis.$control_input[0].blur();\r\n\t\t\tthis.onBlur(null, dest);\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * Returns a function that scores an object\r\n\t\t * to show how good of a match it is to the\r\n\t\t * provided query.\r\n\t\t *\r\n\t\t * @param {string} query\r\n\t\t * @param {object} options\r\n\t\t * @return {function}\r\n\t\t */\r\n\t\tgetScoreFunction: function(query) {\r\n\t\t\treturn this.sifter.getScoreFunction(query, this.getSearchOptions());\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * Returns search options for sifter (the system\r\n\t\t * for scoring and sorting results).\r\n\t\t *\r\n\t\t * @see https://github.com/brianreavis/sifter.js\r\n\t\t * @return {object}\r\n\t\t */\r\n\t\tgetSearchOptions: function() {\r\n\t\t\tvar settings = this.settings;\r\n\t\t\tvar sort = settings.sortField;\r\n\t\t\tif (typeof sort === 'string') {\r\n\t\t\t\tsort = [{field: sort}];\r\n\t\t\t}\r\n\t\r\n\t\t\treturn {\r\n\t\t\t\tfields      : settings.searchField,\r\n\t\t\t\tconjunction : settings.searchConjunction,\r\n\t\t\t\tsort        : sort,\r\n\t\t\t\tnesting     : settings.nesting\r\n\t\t\t};\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * Searches through available options and returns\r\n\t\t * a sorted array of matches.\r\n\t\t *\r\n\t\t * Returns an object containing:\r\n\t\t *\r\n\t\t *   - query {string}\r\n\t\t *   - tokens {array}\r\n\t\t *   - total {int}\r\n\t\t *   - items {array}\r\n\t\t *\r\n\t\t * @param {string} query\r\n\t\t * @returns {object}\r\n\t\t */\r\n\t\tsearch: function(query) {\r\n\t\t\tvar i, value, score, result, calculateScore;\r\n\t\t\tvar self     = this;\r\n\t\t\tvar settings = self.settings;\r\n\t\t\tvar options  = this.getSearchOptions();\r\n\t\r\n\t\t\t// validate user-provided result scoring function\r\n\t\t\tif (settings.score) {\r\n\t\t\t\tcalculateScore = self.settings.score.apply(this, [query]);\r\n\t\t\t\tif (typeof calculateScore !== 'function') {\r\n\t\t\t\t\tthrow new Error('Selectize \"score\" setting must be a function that returns a function');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\r\n\t\t\t// perform search\r\n\t\t\tif (query !== self.lastQuery) {\r\n\t\t\t\tself.lastQuery = query;\r\n\t\t\t\tresult = self.sifter.search(query, $.extend(options, {score: calculateScore}));\r\n\t\t\t\tself.currentResults = result;\r\n\t\t\t} else {\r\n\t\t\t\tresult = $.extend(true, {}, self.currentResults);\r\n\t\t\t}\r\n\t\r\n\t\t\t// filter out selected items\r\n\t\t\tif (settings.hideSelected) {\r\n\t\t\t\tfor (i = result.items.length - 1; i >= 0; i--) {\r\n\t\t\t\t\tif (self.items.indexOf(hash_key(result.items[i].id)) !== -1) {\r\n\t\t\t\t\t\tresult.items.splice(i, 1);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * Refreshes the list of available options shown\r\n\t\t * in the autocomplete dropdown menu.\r\n\t\t *\r\n\t\t * @param {boolean} triggerDropdown\r\n\t\t */\r\n\t\trefreshOptions: function(triggerDropdown) {\r\n\t\t\tvar i, j, k, n, groups, groups_order, option, option_html, optgroup, optgroups, html, html_children, has_create_option;\r\n\t\t\tvar $active, $active_before, $create;\r\n\t\r\n\t\t\tif (typeof triggerDropdown === 'undefined') {\r\n\t\t\t\ttriggerDropdown = true;\r\n\t\t\t}\r\n\t\r\n\t\t\tvar self              = this;\r\n\t\t\tvar query             = $.trim(self.$control_input.val());\r\n\t\t\tvar results           = self.search(query);\r\n\t\t\tvar $dropdown_content = self.$dropdown_content;\r\n\t\t\tvar active_before     = self.$activeOption && hash_key(self.$activeOption.attr('data-value'));\r\n\t\r\n\t\t\t// build markup\r\n\t\t\tn = results.items.length;\r\n\t\t\tif (typeof self.settings.maxOptions === 'number') {\r\n\t\t\t\tn = Math.min(n, self.settings.maxOptions);\r\n\t\t\t}\r\n\t\r\n\t\t\t// render and group available options individually\r\n\t\t\tgroups = {};\r\n\t\t\tgroups_order = [];\r\n\t\r\n\t\t\tfor (i = 0; i < n; i++) {\r\n\t\t\t\toption      = self.options[results.items[i].id];\r\n\t\t\t\toption_html = self.render('option', option);\r\n\t\t\t\toptgroup    = option[self.settings.optgroupField] || '';\r\n\t\t\t\toptgroups   = $.isArray(optgroup) ? optgroup : [optgroup];\r\n\t\r\n\t\t\t\tfor (j = 0, k = optgroups && optgroups.length; j < k; j++) {\r\n\t\t\t\t\toptgroup = optgroups[j];\r\n\t\t\t\t\tif (!self.optgroups.hasOwnProperty(optgroup)) {\r\n\t\t\t\t\t\toptgroup = '';\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!groups.hasOwnProperty(optgroup)) {\r\n\t\t\t\t\t\tgroups[optgroup] = document.createDocumentFragment();\r\n\t\t\t\t\t\tgroups_order.push(optgroup);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgroups[optgroup].appendChild(option_html);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\r\n\t\t\t// sort optgroups\r\n\t\t\tif (this.settings.lockOptgroupOrder) {\r\n\t\t\t\tgroups_order.sort(function(a, b) {\r\n\t\t\t\t\tvar a_order = self.optgroups[a].$order || 0;\r\n\t\t\t\t\tvar b_order = self.optgroups[b].$order || 0;\r\n\t\t\t\t\treturn a_order - b_order;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\r\n\t\t\t// render optgroup headers & join groups\r\n\t\t\thtml = document.createDocumentFragment();\r\n\t\t\tfor (i = 0, n = groups_order.length; i < n; i++) {\r\n\t\t\t\toptgroup = groups_order[i];\r\n\t\t\t\tif (self.optgroups.hasOwnProperty(optgroup) && groups[optgroup].childNodes.length) {\r\n\t\t\t\t\t// render the optgroup header and options within it,\r\n\t\t\t\t\t// then pass it to the wrapper template\r\n\t\t\t\t\thtml_children = document.createDocumentFragment();\r\n\t\t\t\t\thtml_children.appendChild(self.render('optgroup_header', self.optgroups[optgroup]));\r\n\t\t\t\t\thtml_children.appendChild(groups[optgroup]);\r\n\t\r\n\t\t\t\t\thtml.appendChild(self.render('optgroup', $.extend({}, self.optgroups[optgroup], {\r\n\t\t\t\t\t\thtml: domToString(html_children),\r\n\t\t\t\t\t\tdom:  html_children\r\n\t\t\t\t\t})));\r\n\t\t\t\t} else {\r\n\t\t\t\t\thtml.appendChild(groups[optgroup]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\r\n\t\t\t$dropdown_content.html(html);\r\n\t\r\n\t\t\t// highlight matching terms inline\r\n\t\t\tif (self.settings.highlight) {\r\n\t\t\t\t$dropdown_content.removeHighlight();\r\n\t\t\t\tif (results.query.length && results.tokens.length) {\r\n\t\t\t\t\tfor (i = 0, n = results.tokens.length; i < n; i++) {\r\n\t\t\t\t\t\thighlight($dropdown_content, results.tokens[i].regex);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\r\n\t\t\t// add \"selected\" class to selected options\r\n\t\t\tif (!self.settings.hideSelected) {\r\n\t\t\t\tfor (i = 0, n = self.items.length; i < n; i++) {\r\n\t\t\t\t\tself.getOption(self.items[i]).addClass('selected');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\r\n\t\t\t// add create option\r\n\t\t\thas_create_option = self.canCreate(query);\r\n\t\t\tif (has_create_option) {\r\n\t\t\t\t$dropdown_content.prepend(self.render('option_create', {input: query}));\r\n\t\t\t\t$create = $($dropdown_content[0].childNodes[0]);\r\n\t\t\t}\r\n\t\r\n\t\t\t// activate\r\n\t\t\tself.hasOptions = results.items.length > 0 || has_create_option;\r\n\t\t\tif (self.hasOptions) {\r\n\t\t\t\tif (results.items.length > 0) {\r\n\t\t\t\t\t$active_before = active_before && self.getOption(active_before);\r\n\t\t\t\t\tif ($active_before && $active_before.length) {\r\n\t\t\t\t\t\t$active = $active_before;\r\n\t\t\t\t\t} else if (self.settings.mode === 'single' && self.items.length) {\r\n\t\t\t\t\t\t$active = self.getOption(self.items[0]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!$active || !$active.length) {\r\n\t\t\t\t\t\tif ($create && !self.settings.addPrecedence) {\r\n\t\t\t\t\t\t\t$active = self.getAdjacentOption($create, 1);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t$active = $dropdown_content.find('[data-selectable]:first');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$active = $create;\r\n\t\t\t\t}\r\n\t\t\t\tself.setActiveOption($active);\r\n\t\t\t\tif (triggerDropdown && !self.isOpen) { self.open(); }\r\n\t\t\t} else {\r\n\t\t\t\tself.setActiveOption(null);\r\n\t\t\t\tif (triggerDropdown && self.isOpen) { self.close(); }\r\n\t\t\t}\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * Adds an available option. If it already exists,\r\n\t\t * nothing will happen. Note: this does not refresh\r\n\t\t * the options list dropdown (use `refreshOptions`\r\n\t\t * for that).\r\n\t\t *\r\n\t\t * Usage:\r\n\t\t *\r\n\t\t *   this.addOption(data)\r\n\t\t *\r\n\t\t * @param {object|array} data\r\n\t\t */\r\n\t\taddOption: function(data) {\r\n\t\t\tvar i, n, value, self = this;\r\n\t\r\n\t\t\tif ($.isArray(data)) {\r\n\t\t\t\tfor (i = 0, n = data.length; i < n; i++) {\r\n\t\t\t\t\tself.addOption(data[i]);\r\n\t\t\t\t}\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\r\n\t\t\tif (value = self.registerOption(data)) {\r\n\t\t\t\tself.userOptions[value] = true;\r\n\t\t\t\tself.lastQuery = null;\r\n\t\t\t\tself.trigger('option_add', value, data);\r\n\t\t\t}\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * Registers an option to the pool of options.\r\n\t\t *\r\n\t\t * @param {object} data\r\n\t\t * @return {boolean|string}\r\n\t\t */\r\n\t\tregisterOption: function(data) {\r\n\t\t\tvar key = hash_key(data[this.settings.valueField]);\r\n\t\t\tif (typeof key === 'undefined' || key === null || this.options.hasOwnProperty(key)) return false;\r\n\t\t\tdata.$order = data.$order || ++this.order;\r\n\t\t\tthis.options[key] = data;\r\n\t\t\treturn key;\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * Registers an option group to the pool of option groups.\r\n\t\t *\r\n\t\t * @param {object} data\r\n\t\t * @return {boolean|string}\r\n\t\t */\r\n\t\tregisterOptionGroup: function(data) {\r\n\t\t\tvar key = hash_key(data[this.settings.optgroupValueField]);\r\n\t\t\tif (!key) return false;\r\n\t\r\n\t\t\tdata.$order = data.$order || ++this.order;\r\n\t\t\tthis.optgroups[key] = data;\r\n\t\t\treturn key;\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * Registers a new optgroup for options\r\n\t\t * to be bucketed into.\r\n\t\t *\r\n\t\t * @param {string} id\r\n\t\t * @param {object} data\r\n\t\t */\r\n\t\taddOptionGroup: function(id, data) {\r\n\t\t\tdata[this.settings.optgroupValueField] = id;\r\n\t\t\tif (id = this.registerOptionGroup(data)) {\r\n\t\t\t\tthis.trigger('optgroup_add', id, data);\r\n\t\t\t}\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * Removes an existing option group.\r\n\t\t *\r\n\t\t * @param {string} id\r\n\t\t */\r\n\t\tremoveOptionGroup: function(id) {\r\n\t\t\tif (this.optgroups.hasOwnProperty(id)) {\r\n\t\t\t\tdelete this.optgroups[id];\r\n\t\t\t\tthis.renderCache = {};\r\n\t\t\t\tthis.trigger('optgroup_remove', id);\r\n\t\t\t}\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * Clears all existing option groups.\r\n\t\t */\r\n\t\tclearOptionGroups: function() {\r\n\t\t\tthis.optgroups = {};\r\n\t\t\tthis.renderCache = {};\r\n\t\t\tthis.trigger('optgroup_clear');\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * Updates an option available for selection. If\r\n\t\t * it is visible in the selected items or options\r\n\t\t * dropdown, it will be re-rendered automatically.\r\n\t\t *\r\n\t\t * @param {string} value\r\n\t\t * @param {object} data\r\n\t\t */\r\n\t\tupdateOption: function(value, data) {\r\n\t\t\tvar self = this;\r\n\t\t\tvar $item, $item_new;\r\n\t\t\tvar value_new, index_item, cache_items, cache_options, order_old;\r\n\t\r\n\t\t\tvalue     = hash_key(value);\r\n\t\t\tvalue_new = hash_key(data[self.settings.valueField]);\r\n\t\r\n\t\t\t// sanity checks\r\n\t\t\tif (value === null) return;\r\n\t\t\tif (!self.options.hasOwnProperty(value)) return;\r\n\t\t\tif (typeof value_new !== 'string') throw new Error('Value must be set in option data');\r\n\t\r\n\t\t\torder_old = self.options[value].$order;\r\n\t\r\n\t\t\t// update references\r\n\t\t\tif (value_new !== value) {\r\n\t\t\t\tdelete self.options[value];\r\n\t\t\t\tindex_item = self.items.indexOf(value);\r\n\t\t\t\tif (index_item !== -1) {\r\n\t\t\t\t\tself.items.splice(index_item, 1, value_new);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tdata.$order = data.$order || order_old;\r\n\t\t\tself.options[value_new] = data;\r\n\t\r\n\t\t\t// invalidate render cache\r\n\t\t\tcache_items = self.renderCache['item'];\r\n\t\t\tcache_options = self.renderCache['option'];\r\n\t\r\n\t\t\tif (cache_items) {\r\n\t\t\t\tdelete cache_items[value];\r\n\t\t\t\tdelete cache_items[value_new];\r\n\t\t\t}\r\n\t\t\tif (cache_options) {\r\n\t\t\t\tdelete cache_options[value];\r\n\t\t\t\tdelete cache_options[value_new];\r\n\t\t\t}\r\n\t\r\n\t\t\t// update the item if it's selected\r\n\t\t\tif (self.items.indexOf(value_new) !== -1) {\r\n\t\t\t\t$item = self.getItem(value);\r\n\t\t\t\t$item_new = $(self.render('item', data));\r\n\t\t\t\tif ($item.hasClass('active')) $item_new.addClass('active');\r\n\t\t\t\t$item.replaceWith($item_new);\r\n\t\t\t}\r\n\t\r\n\t\t\t// invalidate last query because we might have updated the sortField\r\n\t\t\tself.lastQuery = null;\r\n\t\r\n\t\t\t// update dropdown contents\r\n\t\t\tif (self.isOpen) {\r\n\t\t\t\tself.refreshOptions(false);\r\n\t\t\t}\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * Removes a single option.\r\n\t\t *\r\n\t\t * @param {string} value\r\n\t\t * @param {boolean} silent\r\n\t\t */\r\n\t\tremoveOption: function(value, silent) {\r\n\t\t\tvar self = this;\r\n\t\t\tvalue = hash_key(value);\r\n\t\r\n\t\t\tvar cache_items = self.renderCache['item'];\r\n\t\t\tvar cache_options = self.renderCache['option'];\r\n\t\t\tif (cache_items) delete cache_items[value];\r\n\t\t\tif (cache_options) delete cache_options[value];\r\n\t\r\n\t\t\tdelete self.userOptions[value];\r\n\t\t\tdelete self.options[value];\r\n\t\t\tself.lastQuery = null;\r\n\t\t\tself.trigger('option_remove', value);\r\n\t\t\tself.removeItem(value, silent);\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * Clears all options.\r\n\t\t */\r\n\t\tclearOptions: function() {\r\n\t\t\tvar self = this;\r\n\t\r\n\t\t\tself.loadedSearches = {};\r\n\t\t\tself.userOptions = {};\r\n\t\t\tself.renderCache = {};\r\n\t\t\tvar options = self.options;\r\n\t\t\t$.each(self.options, function(key, value) {\r\n\t\t\t\tif(self.items.indexOf(key) == -1) {\r\n\t\t\t\t\tdelete options[key];\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tself.options = self.sifter.items = options;\r\n\t\t\tself.lastQuery = null;\r\n\t\t\tself.trigger('option_clear');\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * Returns the jQuery element of the option\r\n\t\t * matching the given value.\r\n\t\t *\r\n\t\t * @param {string} value\r\n\t\t * @returns {object}\r\n\t\t */\r\n\t\tgetOption: function(value) {\r\n\t\t\treturn this.getElementWithValue(value, this.$dropdown_content.find('[data-selectable]'));\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * Returns the jQuery element of the next or\r\n\t\t * previous selectable option.\r\n\t\t *\r\n\t\t * @param {object} $option\r\n\t\t * @param {int} direction  can be 1 for next or -1 for previous\r\n\t\t * @return {object}\r\n\t\t */\r\n\t\tgetAdjacentOption: function($option, direction) {\r\n\t\t\tvar $options = this.$dropdown.find('[data-selectable]');\r\n\t\t\tvar index    = $options.index($option) + direction;\r\n\t\r\n\t\t\treturn index >= 0 && index < $options.length ? $options.eq(index) : $();\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * Finds the first element with a \"data-value\" attribute\r\n\t\t * that matches the given value.\r\n\t\t *\r\n\t\t * @param {mixed} value\r\n\t\t * @param {object} $els\r\n\t\t * @return {object}\r\n\t\t */\r\n\t\tgetElementWithValue: function(value, $els) {\r\n\t\t\tvalue = hash_key(value);\r\n\t\r\n\t\t\tif (typeof value !== 'undefined' && value !== null) {\r\n\t\t\t\tfor (var i = 0, n = $els.length; i < n; i++) {\r\n\t\t\t\t\tif ($els[i].getAttribute('data-value') === value) {\r\n\t\t\t\t\t\treturn $($els[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\r\n\t\t\treturn $();\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * Returns the jQuery element of the item\r\n\t\t * matching the given value.\r\n\t\t *\r\n\t\t * @param {string} value\r\n\t\t * @returns {object}\r\n\t\t */\r\n\t\tgetItem: function(value) {\r\n\t\t\treturn this.getElementWithValue(value, this.$control.children());\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * \"Selects\" multiple items at once. Adds them to the list\r\n\t\t * at the current caret position.\r\n\t\t *\r\n\t\t * @param {string} value\r\n\t\t * @param {boolean} silent\r\n\t\t */\r\n\t\taddItems: function(values, silent) {\r\n\t\t\tthis.buffer = document.createDocumentFragment();\r\n\t\r\n\t\t\tvar childNodes = this.$control[0].childNodes;\r\n\t\t\tfor (var i = 0; i < childNodes.length; i++) {\r\n\t\t\t\tthis.buffer.appendChild(childNodes[i]);\r\n\t\t\t}\r\n\t\r\n\t\t\tvar items = $.isArray(values) ? values : [values];\r\n\t\t\tfor (var i = 0, n = items.length; i < n; i++) {\r\n\t\t\t\tthis.isPending = (i < n - 1);\r\n\t\t\t\tthis.addItem(items[i], silent);\r\n\t\t\t}\r\n\t\r\n\t\t\tvar control = this.$control[0];\r\n\t\t\tcontrol.insertBefore(this.buffer, control.firstChild);\r\n\t\r\n\t\t\tthis.buffer = null;\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * \"Selects\" an item. Adds it to the list\r\n\t\t * at the current caret position.\r\n\t\t *\r\n\t\t * @param {string} value\r\n\t\t * @param {boolean} silent\r\n\t\t */\r\n\t\taddItem: function(value, silent) {\r\n\t\t\tvar events = silent ? [] : ['change'];\r\n\t\r\n\t\t\tdebounce_events(this, events, function() {\r\n\t\t\t\tvar $item, $option, $options;\r\n\t\t\t\tvar self = this;\r\n\t\t\t\tvar inputMode = self.settings.mode;\r\n\t\t\t\tvar i, active, value_next, wasFull;\r\n\t\t\t\tvalue = hash_key(value);\r\n\t\r\n\t\t\t\tif (self.items.indexOf(value) !== -1) {\r\n\t\t\t\t\tif (inputMode === 'single') self.close();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif (!self.options.hasOwnProperty(value)) return;\r\n\t\t\t\tif (inputMode === 'single') self.clear(silent);\r\n\t\t\t\tif (inputMode === 'multi' && self.isFull()) return;\r\n\t\r\n\t\t\t\t$item = $(self.render('item', self.options[value]));\r\n\t\t\t\twasFull = self.isFull();\r\n\t\t\t\tself.items.splice(self.caretPos, 0, value);\r\n\t\t\t\tself.insertAtCaret($item);\r\n\t\t\t\tif (!self.isPending || (!wasFull && self.isFull())) {\r\n\t\t\t\t\tself.refreshState();\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif (self.isSetup) {\r\n\t\t\t\t\t$options = self.$dropdown_content.find('[data-selectable]');\r\n\t\r\n\t\t\t\t\t// update menu / remove the option (if this is not one item being added as part of series)\r\n\t\t\t\t\tif (!self.isPending) {\r\n\t\t\t\t\t\t$option = self.getOption(value);\r\n\t\t\t\t\t\tvalue_next = self.getAdjacentOption($option, 1).attr('data-value');\r\n\t\t\t\t\t\tself.refreshOptions(self.isFocused && inputMode !== 'single');\r\n\t\t\t\t\t\tif (value_next) {\r\n\t\t\t\t\t\t\tself.setActiveOption(self.getOption(value_next));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t// hide the menu if the maximum number of items have been selected or no options are left\r\n\t\t\t\t\tif (!$options.length || self.isFull()) {\r\n\t\t\t\t\t\tself.close();\r\n\t\t\t\t\t} else if (!self.isPending) {\r\n\t\t\t\t\t\tself.positionDropdown();\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\tself.updatePlaceholder();\r\n\t\t\t\t\tself.trigger('item_add', value, $item);\r\n\t\r\n\t\t\t\t\tif (!self.isPending) {\r\n\t\t\t\t\t\tself.updateOriginalInput({silent: silent});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * Removes the selected item matching\r\n\t\t * the provided value.\r\n\t\t *\r\n\t\t * @param {string} value\r\n\t\t */\r\n\t\tremoveItem: function(value, silent) {\r\n\t\t\tvar self = this;\r\n\t\t\tvar $item, i, idx;\r\n\t\r\n\t\t\t$item = (value instanceof $) ? value : self.getItem(value);\r\n\t\t\tvalue = hash_key($item.attr('data-value'));\r\n\t\t\ti = self.items.indexOf(value);\r\n\t\r\n\t\t\tif (i !== -1) {\r\n\t\t\t\t$item.remove();\r\n\t\t\t\tif ($item.hasClass('active')) {\r\n\t\t\t\t\tidx = self.$activeItems.indexOf($item[0]);\r\n\t\t\t\t\tself.$activeItems.splice(idx, 1);\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tself.items.splice(i, 1);\r\n\t\t\t\tself.lastQuery = null;\r\n\t\t\t\tif (!self.settings.persist && self.userOptions.hasOwnProperty(value)) {\r\n\t\t\t\t\tself.removeOption(value, silent);\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif (i < self.caretPos) {\r\n\t\t\t\t\tself.setCaret(self.caretPos - 1);\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tself.refreshState();\r\n\t\t\t\tself.updatePlaceholder();\r\n\t\t\t\tself.updateOriginalInput({silent: silent});\r\n\t\t\t\tself.positionDropdown();\r\n\t\t\t\tself.trigger('item_remove', value, $item);\r\n\t\t\t}\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * Invokes the `create` method provided in the\r\n\t\t * selectize options that should provide the data\r\n\t\t * for the new item, given the user input.\r\n\t\t *\r\n\t\t * Once this completes, it will be added\r\n\t\t * to the item list.\r\n\t\t *\r\n\t\t * @param {string} value\r\n\t\t * @param {boolean} [triggerDropdown]\r\n\t\t * @param {function} [callback]\r\n\t\t * @return {boolean}\r\n\t\t */\r\n\t\tcreateItem: function(input, triggerDropdown) {\r\n\t\t\tvar self  = this;\r\n\t\t\tvar caret = self.caretPos;\r\n\t\t\tinput = input || $.trim(self.$control_input.val() || '');\r\n\t\r\n\t\t\tvar callback = arguments[arguments.length - 1];\r\n\t\t\tif (typeof callback !== 'function') callback = function() {};\r\n\t\r\n\t\t\tif (typeof triggerDropdown !== 'boolean') {\r\n\t\t\t\ttriggerDropdown = true;\r\n\t\t\t}\r\n\t\r\n\t\t\tif (!self.canCreate(input)) {\r\n\t\t\t\tcallback();\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\r\n\t\t\tself.lock();\r\n\t\r\n\t\t\tvar setup = (typeof self.settings.create === 'function') ? this.settings.create : function(input) {\r\n\t\t\t\tvar data = {};\r\n\t\t\t\tdata[self.settings.labelField] = input;\r\n\t\t\t\tdata[self.settings.valueField] = input;\r\n\t\t\t\treturn data;\r\n\t\t\t};\r\n\t\r\n\t\t\tvar create = once(function(data) {\r\n\t\t\t\tself.unlock();\r\n\t\r\n\t\t\t\tif (!data || typeof data !== 'object') return callback();\r\n\t\t\t\tvar value = hash_key(data[self.settings.valueField]);\r\n\t\t\t\tif (typeof value !== 'string') return callback();\r\n\t\r\n\t\t\t\tself.setTextboxValue('');\r\n\t\t\t\tself.addOption(data);\r\n\t\t\t\tself.setCaret(caret);\r\n\t\t\t\tself.addItem(value);\r\n\t\t\t\tself.refreshOptions(triggerDropdown && self.settings.mode !== 'single');\r\n\t\t\t\tcallback(data);\r\n\t\t\t});\r\n\t\r\n\t\t\tvar output = setup.apply(this, [input, create]);\r\n\t\t\tif (typeof output !== 'undefined') {\r\n\t\t\t\tcreate(output);\r\n\t\t\t}\r\n\t\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * Re-renders the selected item lists.\r\n\t\t */\r\n\t\trefreshItems: function() {\r\n\t\t\tthis.lastQuery = null;\r\n\t\r\n\t\t\tif (this.isSetup) {\r\n\t\t\t\tthis.addItem(this.items);\r\n\t\t\t}\r\n\t\r\n\t\t\tthis.refreshState();\r\n\t\t\tthis.updateOriginalInput();\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * Updates all state-dependent attributes\r\n\t\t * and CSS classes.\r\n\t\t */\r\n\t\trefreshState: function() {\r\n\t\t\tthis.refreshValidityState();\r\n\t\t\tthis.refreshClasses();\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * Update the `required` attribute of both input and control input.\r\n\t\t *\r\n\t\t * The `required` property needs to be activated on the control input\r\n\t\t * for the error to be displayed at the right place. `required` also\r\n\t\t * needs to be temporarily deactivated on the input since the input is\r\n\t\t * hidden and can't show errors.\r\n\t\t */\r\n\t\trefreshValidityState: function() {\r\n\t\t\tif (!this.isRequired) return false;\r\n\t\r\n\t\t\tvar invalid = !this.items.length;\r\n\t\r\n\t\t\tthis.isInvalid = invalid;\r\n\t\t\tthis.$control_input.prop('required', invalid);\r\n\t\t\tthis.$input.prop('required', !invalid);\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * Updates all state-dependent CSS classes.\r\n\t\t */\r\n\t\trefreshClasses: function() {\r\n\t\t\tvar self     = this;\r\n\t\t\tvar isFull   = self.isFull();\r\n\t\t\tvar isLocked = self.isLocked;\r\n\t\r\n\t\t\tself.$wrapper\r\n\t\t\t\t.toggleClass('rtl', self.rtl);\r\n\t\r\n\t\t\tself.$control\r\n\t\t\t\t.toggleClass('focus', self.isFocused)\r\n\t\t\t\t.toggleClass('disabled', self.isDisabled)\r\n\t\t\t\t.toggleClass('required', self.isRequired)\r\n\t\t\t\t.toggleClass('invalid', self.isInvalid)\r\n\t\t\t\t.toggleClass('locked', isLocked)\r\n\t\t\t\t.toggleClass('full', isFull).toggleClass('not-full', !isFull)\r\n\t\t\t\t.toggleClass('input-active', self.isFocused && !self.isInputHidden)\r\n\t\t\t\t.toggleClass('dropdown-active', self.isOpen)\r\n\t\t\t\t.toggleClass('has-options', !$.isEmptyObject(self.options))\r\n\t\t\t\t.toggleClass('has-items', self.items.length > 0);\r\n\t\r\n\t\t\tself.$control_input.data('grow', !isFull && !isLocked);\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * Determines whether or not more items can be added\r\n\t\t * to the control without exceeding the user-defined maximum.\r\n\t\t *\r\n\t\t * @returns {boolean}\r\n\t\t */\r\n\t\tisFull: function() {\r\n\t\t\treturn this.settings.maxItems !== null && this.items.length >= this.settings.maxItems;\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * Refreshes the original <select> or <input>\r\n\t\t * element to reflect the current state.\r\n\t\t */\r\n\t\tupdateOriginalInput: function(opts) {\r\n\t\t\tvar i, n, options, label, self = this;\r\n\t\t\topts = opts || {};\r\n\t\r\n\t\t\tif (self.tagType === TAG_SELECT) {\r\n\t\t\t\toptions = [];\r\n\t\t\t\tfor (i = 0, n = self.items.length; i < n; i++) {\r\n\t\t\t\t\tlabel = self.options[self.items[i]][self.settings.labelField] || '';\r\n\t\t\t\t\toptions.push('<option value=\"' + escape_html(self.items[i]) + '\" selected=\"selected\">' + escape_html(label) + '</option>');\r\n\t\t\t\t}\r\n\t\t\t\tif (!options.length && !this.$input.attr('multiple')) {\r\n\t\t\t\t\toptions.push('<option value=\"\" selected=\"selected\"></option>');\r\n\t\t\t\t}\r\n\t\t\t\tself.$input.html(options.join(''));\r\n\t\t\t} else {\r\n\t\t\t\tself.$input.val(self.getValue());\r\n\t\t\t\tself.$input.attr('value',self.$input.val());\r\n\t\t\t}\r\n\t\r\n\t\t\tif (self.isSetup) {\r\n\t\t\t\tif (!opts.silent) {\r\n\t\t\t\t\tself.trigger('change', self.$input.val());\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * Shows/hide the input placeholder depending\r\n\t\t * on if there items in the list already.\r\n\t\t */\r\n\t\tupdatePlaceholder: function() {\r\n\t\t\tif (!this.settings.placeholder) return;\r\n\t\t\tvar $input = this.$control_input;\r\n\t\r\n\t\t\tif (this.items.length) {\r\n\t\t\t\t$input.removeAttr('placeholder');\r\n\t\t\t} else {\r\n\t\t\t\t$input.attr('placeholder', this.settings.placeholder);\r\n\t\t\t}\r\n\t\t\t$input.triggerHandler('update', {force: true});\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * Shows the autocomplete dropdown containing\r\n\t\t * the available options.\r\n\t\t */\r\n\t\topen: function() {\r\n\t\t\tvar self = this;\r\n\t\r\n\t\t\tif (self.isLocked || self.isOpen || (self.settings.mode === 'multi' && self.isFull())) return;\r\n\t\t\tself.focus();\r\n\t\t\tself.isOpen = true;\r\n\t\t\tself.refreshState();\r\n\t\t\tself.$dropdown.css({visibility: 'hidden', display: 'block'});\r\n\t\t\tself.positionDropdown();\r\n\t\t\tself.$dropdown.css({visibility: 'visible'});\r\n\t\t\tself.trigger('dropdown_open', self.$dropdown);\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * Closes the autocomplete dropdown menu.\r\n\t\t */\r\n\t\tclose: function() {\r\n\t\t\tvar self = this;\r\n\t\t\tvar trigger = self.isOpen;\r\n\t\r\n\t\t\tif (self.settings.mode === 'single' && self.items.length) {\r\n\t\t\t\tself.hideInput();\r\n\t\r\n\t\t\t\t// Do not trigger blur while inside a blur event,\r\n\t\t\t\t// this fixes some weird tabbing behavior in FF and IE.\r\n\t\t\t\t// See #1164\r\n\t\t\t\tif (!self.isBlurring) {\r\n\t\t\t\t\tself.$control_input.blur(); // close keyboard on iOS\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\r\n\t\t\tself.isOpen = false;\r\n\t\t\tself.$dropdown.hide();\r\n\t\t\tself.setActiveOption(null);\r\n\t\t\tself.refreshState();\r\n\t\r\n\t\t\tif (trigger) self.trigger('dropdown_close', self.$dropdown);\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * Calculates and applies the appropriate\r\n\t\t * position of the dropdown.\r\n\t\t */\r\n\t\tpositionDropdown: function() {\r\n\t\t\tvar $control = this.$control;\r\n\t\t\tvar offset = this.settings.dropdownParent === 'body' ? $control.offset() : $control.position();\r\n\t\t\toffset.top += $control.outerHeight(true);\r\n\t\r\n\t\t\tthis.$dropdown.css({\r\n\t\t\t\twidth : $control[0].getBoundingClientRect().width,\r\n\t\t\t\ttop   : offset.top,\r\n\t\t\t\tleft  : offset.left\r\n\t\t\t});\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * Resets / clears all selected items\r\n\t\t * from the control.\r\n\t\t *\r\n\t\t * @param {boolean} silent\r\n\t\t */\r\n\t\tclear: function(silent) {\r\n\t\t\tvar self = this;\r\n\t\r\n\t\t\tif (!self.items.length) return;\r\n\t\t\tself.$control.children(':not(input)').remove();\r\n\t\t\tself.items = [];\r\n\t\t\tself.lastQuery = null;\r\n\t\t\tself.setCaret(0);\r\n\t\t\tself.setActiveItem(null);\r\n\t\t\tself.updatePlaceholder();\r\n\t\t\tself.updateOriginalInput({silent: silent});\r\n\t\t\tself.refreshState();\r\n\t\t\tself.showInput();\r\n\t\t\tself.trigger('clear');\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * A helper method for inserting an element\r\n\t\t * at the current caret position.\r\n\t\t *\r\n\t\t * @param {object} $el\r\n\t\t */\r\n\t\tinsertAtCaret: function($el) {\r\n\t\t\tvar caret = Math.min(this.caretPos, this.items.length);\r\n\t\t\tvar el = $el[0];\r\n\t\t\tvar target = this.buffer || this.$control[0];\r\n\t\r\n\t\t\tif (caret === 0) {\r\n\t\t\t\ttarget.insertBefore(el, target.firstChild);\r\n\t\t\t} else {\r\n\t\t\t\ttarget.insertBefore(el, target.childNodes[caret]);\r\n\t\t\t}\r\n\t\r\n\t\t\tthis.setCaret(caret + 1);\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * Removes the current selected item(s).\r\n\t\t *\r\n\t\t * @param {object} e (optional)\r\n\t\t * @returns {boolean}\r\n\t\t */\r\n\t\tdeleteSelection: function(e) {\r\n\t\t\tvar i, n, direction, selection, values, caret, option_select, $option_select, $tail;\r\n\t\t\tvar self = this;\r\n\t\r\n\t\t\tdirection = (e && e.keyCode === KEY_BACKSPACE) ? -1 : 1;\r\n\t\t\tselection = getSelection(self.$control_input[0]);\r\n\t\r\n\t\t\tif (self.$activeOption && !self.settings.hideSelected) {\r\n\t\t\t\toption_select = self.getAdjacentOption(self.$activeOption, -1).attr('data-value');\r\n\t\t\t}\r\n\t\r\n\t\t\t// determine items that will be removed\r\n\t\t\tvalues = [];\r\n\t\r\n\t\t\tif (self.$activeItems.length) {\r\n\t\t\t\t$tail = self.$control.children('.active:' + (direction > 0 ? 'last' : 'first'));\r\n\t\t\t\tcaret = self.$control.children(':not(input)').index($tail);\r\n\t\t\t\tif (direction > 0) { caret++; }\r\n\t\r\n\t\t\t\tfor (i = 0, n = self.$activeItems.length; i < n; i++) {\r\n\t\t\t\t\tvalues.push($(self.$activeItems[i]).attr('data-value'));\r\n\t\t\t\t}\r\n\t\t\t\tif (e) {\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t}\r\n\t\t\t} else if ((self.isFocused || self.settings.mode === 'single') && self.items.length) {\r\n\t\t\t\tif (direction < 0 && selection.start === 0 && selection.length === 0) {\r\n\t\t\t\t\tvalues.push(self.items[self.caretPos - 1]);\r\n\t\t\t\t} else if (direction > 0 && selection.start === self.$control_input.val().length) {\r\n\t\t\t\t\tvalues.push(self.items[self.caretPos]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\r\n\t\t\t// allow the callback to abort\r\n\t\t\tif (!values.length || (typeof self.settings.onDelete === 'function' && self.settings.onDelete.apply(self, [values]) === false)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\r\n\t\t\t// perform removal\r\n\t\t\tif (typeof caret !== 'undefined') {\r\n\t\t\t\tself.setCaret(caret);\r\n\t\t\t}\r\n\t\t\twhile (values.length) {\r\n\t\t\t\tself.removeItem(values.pop());\r\n\t\t\t}\r\n\t\r\n\t\t\tself.showInput();\r\n\t\t\tself.positionDropdown();\r\n\t\t\tself.refreshOptions(true);\r\n\t\r\n\t\t\t// select previous option\r\n\t\t\tif (option_select) {\r\n\t\t\t\t$option_select = self.getOption(option_select);\r\n\t\t\t\tif ($option_select.length) {\r\n\t\t\t\t\tself.setActiveOption($option_select);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * Selects the previous / next item (depending\r\n\t\t * on the `direction` argument).\r\n\t\t *\r\n\t\t * > 0 - right\r\n\t\t * < 0 - left\r\n\t\t *\r\n\t\t * @param {int} direction\r\n\t\t * @param {object} e (optional)\r\n\t\t */\r\n\t\tadvanceSelection: function(direction, e) {\r\n\t\t\tvar tail, selection, idx, valueLength, cursorAtEdge, $tail;\r\n\t\t\tvar self = this;\r\n\t\r\n\t\t\tif (direction === 0) return;\r\n\t\t\tif (self.rtl) direction *= -1;\r\n\t\r\n\t\t\ttail = direction > 0 ? 'last' : 'first';\r\n\t\t\tselection = getSelection(self.$control_input[0]);\r\n\t\r\n\t\t\tif (self.isFocused && !self.isInputHidden) {\r\n\t\t\t\tvalueLength = self.$control_input.val().length;\r\n\t\t\t\tcursorAtEdge = direction < 0\r\n\t\t\t\t\t? selection.start === 0 && selection.length === 0\r\n\t\t\t\t\t: selection.start === valueLength;\r\n\t\r\n\t\t\t\tif (cursorAtEdge && !valueLength) {\r\n\t\t\t\t\tself.advanceCaret(direction, e);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\t$tail = self.$control.children('.active:' + tail);\r\n\t\t\t\tif ($tail.length) {\r\n\t\t\t\t\tidx = self.$control.children(':not(input)').index($tail);\r\n\t\t\t\t\tself.setActiveItem(null);\r\n\t\t\t\t\tself.setCaret(direction > 0 ? idx + 1 : idx);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * Moves the caret left / right.\r\n\t\t *\r\n\t\t * @param {int} direction\r\n\t\t * @param {object} e (optional)\r\n\t\t */\r\n\t\tadvanceCaret: function(direction, e) {\r\n\t\t\tvar self = this, fn, $adj;\r\n\t\r\n\t\t\tif (direction === 0) return;\r\n\t\r\n\t\t\tfn = direction > 0 ? 'next' : 'prev';\r\n\t\t\tif (self.isShiftDown) {\r\n\t\t\t\t$adj = self.$control_input[fn]();\r\n\t\t\t\tif ($adj.length) {\r\n\t\t\t\t\tself.hideInput();\r\n\t\t\t\t\tself.setActiveItem($adj);\r\n\t\t\t\t\te && e.preventDefault();\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tself.setCaret(self.caretPos + direction);\r\n\t\t\t}\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * Moves the caret to the specified index.\r\n\t\t *\r\n\t\t * @param {int} i\r\n\t\t */\r\n\t\tsetCaret: function(i) {\r\n\t\t\tvar self = this;\r\n\t\r\n\t\t\tif (self.settings.mode === 'single') {\r\n\t\t\t\ti = self.items.length;\r\n\t\t\t} else {\r\n\t\t\t\ti = Math.max(0, Math.min(self.items.length, i));\r\n\t\t\t}\r\n\t\r\n\t\t\tif(!self.isPending) {\r\n\t\t\t\t// the input must be moved by leaving it in place and moving the\r\n\t\t\t\t// siblings, due to the fact that focus cannot be restored once lost\r\n\t\t\t\t// on mobile webkit devices\r\n\t\t\t\tvar j, n, fn, $children, $child;\r\n\t\t\t\t$children = self.$control.children(':not(input)');\r\n\t\t\t\tfor (j = 0, n = $children.length; j < n; j++) {\r\n\t\t\t\t\t$child = $($children[j]).detach();\r\n\t\t\t\t\tif (j <  i) {\r\n\t\t\t\t\t\tself.$control_input.before($child);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tself.$control.append($child);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\r\n\t\t\tself.caretPos = i;\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * Disables user input on the control. Used while\r\n\t\t * items are being asynchronously created.\r\n\t\t */\r\n\t\tlock: function() {\r\n\t\t\tthis.close();\r\n\t\t\tthis.isLocked = true;\r\n\t\t\tthis.refreshState();\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * Re-enables user input on the control.\r\n\t\t */\r\n\t\tunlock: function() {\r\n\t\t\tthis.isLocked = false;\r\n\t\t\tthis.refreshState();\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * Disables user input on the control completely.\r\n\t\t * While disabled, it cannot receive focus.\r\n\t\t */\r\n\t\tdisable: function() {\r\n\t\t\tvar self = this;\r\n\t\t\tself.$input.prop('disabled', true);\r\n\t\t\tself.$control_input.prop('disabled', true).prop('tabindex', -1);\r\n\t\t\tself.isDisabled = true;\r\n\t\t\tself.lock();\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * Enables the control so that it can respond\r\n\t\t * to focus and user input.\r\n\t\t */\r\n\t\tenable: function() {\r\n\t\t\tvar self = this;\r\n\t\t\tself.$input.prop('disabled', false);\r\n\t\t\tself.$control_input.prop('disabled', false).prop('tabindex', self.tabIndex);\r\n\t\t\tself.isDisabled = false;\r\n\t\t\tself.unlock();\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * Completely destroys the control and\r\n\t\t * unbinds all event listeners so that it can\r\n\t\t * be garbage collected.\r\n\t\t */\r\n\t\tdestroy: function() {\r\n\t\t\tvar self = this;\r\n\t\t\tvar eventNS = self.eventNS;\r\n\t\t\tvar revertSettings = self.revertSettings;\r\n\t\r\n\t\t\tself.trigger('destroy');\r\n\t\t\tself.off();\r\n\t\t\tself.$wrapper.remove();\r\n\t\t\tself.$dropdown.remove();\r\n\t\r\n\t\t\tself.$input\r\n\t\t\t\t.html('')\r\n\t\t\t\t.append(revertSettings.$children)\r\n\t\t\t\t.removeAttr('tabindex')\r\n\t\t\t\t.removeClass('selectized')\r\n\t\t\t\t.attr({tabindex: revertSettings.tabindex})\r\n\t\t\t\t.show();\r\n\t\r\n\t\t\tself.$control_input.removeData('grow');\r\n\t\t\tself.$input.removeData('selectize');\r\n\t\r\n\t\t\tif (--Selectize.count == 0 && Selectize.$testInput) {\r\n\t\t\t\tSelectize.$testInput.remove();\r\n\t\t\t\tSelectize.$testInput = undefined;\r\n\t\t\t}\r\n\t\r\n\t\t\t$(window).off(eventNS);\r\n\t\t\t$(document).off(eventNS);\r\n\t\t\t$(document.body).off(eventNS);\r\n\t\r\n\t\t\tdelete self.$input[0].selectize;\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * A helper method for rendering \"item\" and\r\n\t\t * \"option\" templates, given the data.\r\n\t\t *\r\n\t\t * @param {string} templateName\r\n\t\t * @param {object} data\r\n\t\t * @returns {string}\r\n\t\t */\r\n\t\trender: function(templateName, data) {\r\n\t\t\tvar value, id, label;\r\n\t\t\tvar html = '';\r\n\t\t\tvar cache = false;\r\n\t\t\tvar self = this;\r\n\t\t\tvar regex_tag = /^[\\t \\r\\n]*<([a-z][a-z0-9\\-_]*(?:\\:[a-z][a-z0-9\\-_]*)?)/i;\r\n\t\r\n\t\t\tif (templateName === 'option' || templateName === 'item') {\r\n\t\t\t\tvalue = hash_key(data[self.settings.valueField]);\r\n\t\t\t\tcache = !!value;\r\n\t\t\t}\r\n\t\r\n\t\t\t// pull markup from cache if it exists\r\n\t\t\tif (cache) {\r\n\t\t\t\tif (!isset(self.renderCache[templateName])) {\r\n\t\t\t\t\tself.renderCache[templateName] = {};\r\n\t\t\t\t}\r\n\t\t\t\tif (self.renderCache[templateName].hasOwnProperty(value)) {\r\n\t\t\t\t\treturn self.renderCache[templateName][value];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\r\n\t\t\t// render markup\r\n\t\t\thtml = $(self.settings.render[templateName].apply(this, [data, escape_html]));\r\n\t\r\n\t\t\t// add mandatory attributes\r\n\t\t\tif (templateName === 'option' || templateName === 'option_create') {\r\n\t\t\t\tif (!data[self.settings.disabledField]) {\r\n\t\t\t\t\thtml.attr('data-selectable', '');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if (templateName === 'optgroup') {\r\n\t\t\t\tid = data[self.settings.optgroupValueField] || '';\r\n\t\t\t\thtml.attr('data-group', id);\r\n\t\t\t\tif(data[self.settings.disabledField]) {\r\n\t\t\t\t\thtml.attr('data-disabled', '');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (templateName === 'option' || templateName === 'item') {\r\n\t\t\t\thtml.attr('data-value', value || '');\r\n\t\t\t}\r\n\t\r\n\t\t\t// update cache\r\n\t\t\tif (cache) {\r\n\t\t\t\tself.renderCache[templateName][value] = html[0];\r\n\t\t\t}\r\n\t\r\n\t\t\treturn html[0];\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * Clears the render cache for a template. If\r\n\t\t * no template is given, clears all render\r\n\t\t * caches.\r\n\t\t *\r\n\t\t * @param {string} templateName\r\n\t\t */\r\n\t\tclearCache: function(templateName) {\r\n\t\t\tvar self = this;\r\n\t\t\tif (typeof templateName === 'undefined') {\r\n\t\t\t\tself.renderCache = {};\r\n\t\t\t} else {\r\n\t\t\t\tdelete self.renderCache[templateName];\r\n\t\t\t}\r\n\t\t},\r\n\t\r\n\t\t/**\r\n\t\t * Determines whether or not to display the\r\n\t\t * create item prompt, given a user input.\r\n\t\t *\r\n\t\t * @param {string} input\r\n\t\t * @return {boolean}\r\n\t\t */\r\n\t\tcanCreate: function(input) {\r\n\t\t\tvar self = this;\r\n\t\t\tif (!self.settings.create) return false;\r\n\t\t\tvar filter = self.settings.createFilter;\r\n\t\t\treturn input.length\r\n\t\t\t\t&& (typeof filter !== 'function' || filter.apply(self, [input]))\r\n\t\t\t\t&& (typeof filter !== 'string' || new RegExp(filter).test(input))\r\n\t\t\t\t&& (!(filter instanceof RegExp) || filter.test(input));\r\n\t\t}\r\n\t\r\n\t});\r\n\t\r\n\t\r\n\tSelectize.count = 0;\r\n\tSelectize.defaults = {\r\n\t\toptions: [],\r\n\t\toptgroups: [],\r\n\t\r\n\t\tplugins: [],\r\n\t\tdelimiter: ',',\r\n\t\tsplitOn: null, // regexp or string for splitting up values from a paste command\r\n\t\tpersist: true,\r\n\t\tdiacritics: true,\r\n\t\tcreate: false,\r\n\t\tcreateOnBlur: false,\r\n\t\tcreateFilter: null,\r\n\t\thighlight: true,\r\n\t\topenOnFocus: true,\r\n\t\tmaxOptions: 1000,\r\n\t\tmaxItems: null,\r\n\t\thideSelected: null,\r\n\t\taddPrecedence: false,\r\n\t\tselectOnTab: false,\r\n\t\tpreload: false,\r\n\t\tallowEmptyOption: false,\r\n\t\tcloseAfterSelect: false,\r\n\t\r\n\t\tscrollDuration: 60,\r\n\t\tloadThrottle: 300,\r\n\t\tloadingClass: 'loading',\r\n\t\r\n\t\tdataAttr: 'data-data',\r\n\t\toptgroupField: 'optgroup',\r\n\t\tvalueField: 'value',\r\n\t\tlabelField: 'text',\r\n\t\tdisabledField: 'disabled',\r\n\t\toptgroupLabelField: 'label',\r\n\t\toptgroupValueField: 'value',\r\n\t\tlockOptgroupOrder: false,\r\n\t\r\n\t\tsortField: '$order',\r\n\t\tsearchField: ['text'],\r\n\t\tsearchConjunction: 'and',\r\n\t\r\n\t\tmode: null,\r\n\t\twrapperClass: 'selectize-control',\r\n\t\tinputClass: 'selectize-input',\r\n\t\tdropdownClass: 'selectize-dropdown',\r\n\t\tdropdownContentClass: 'selectize-dropdown-content',\r\n\t\r\n\t\tdropdownParent: null,\r\n\t\r\n\t\tcopyClassesToDropdown: true,\r\n\t\r\n\t\t/*\r\n\t\tload                 : null, // function(query, callback) { ... }\r\n\t\tscore                : null, // function(search) { ... }\r\n\t\tonInitialize         : null, // function() { ... }\r\n\t\tonChange             : null, // function(value) { ... }\r\n\t\tonItemAdd            : null, // function(value, $item) { ... }\r\n\t\tonItemRemove         : null, // function(value) { ... }\r\n\t\tonClear              : null, // function() { ... }\r\n\t\tonOptionAdd          : null, // function(value, data) { ... }\r\n\t\tonOptionRemove       : null, // function(value) { ... }\r\n\t\tonOptionClear        : null, // function() { ... }\r\n\t\tonOptionGroupAdd     : null, // function(id, data) { ... }\r\n\t\tonOptionGroupRemove  : null, // function(id) { ... }\r\n\t\tonOptionGroupClear   : null, // function() { ... }\r\n\t\tonDropdownOpen       : null, // function($dropdown) { ... }\r\n\t\tonDropdownClose      : null, // function($dropdown) { ... }\r\n\t\tonType               : null, // function(str) { ... }\r\n\t\tonDelete             : null, // function(values) { ... }\r\n\t\t*/\r\n\t\r\n\t\trender: {\r\n\t\t\t/*\r\n\t\t\titem: null,\r\n\t\t\toptgroup: null,\r\n\t\t\toptgroup_header: null,\r\n\t\t\toption: null,\r\n\t\t\toption_create: null\r\n\t\t\t*/\r\n\t\t}\r\n\t};\r\n\t\r\n\t\r\n\t$.fn.selectize = function(settings_user) {\r\n\t\tvar defaults             = $.fn.selectize.defaults;\r\n\t\tvar settings             = $.extend({}, defaults, settings_user);\r\n\t\tvar attr_data            = settings.dataAttr;\r\n\t\tvar field_label          = settings.labelField;\r\n\t\tvar field_value          = settings.valueField;\r\n\t\tvar field_disabled       = settings.disabledField;\r\n\t\tvar field_optgroup       = settings.optgroupField;\r\n\t\tvar field_optgroup_label = settings.optgroupLabelField;\r\n\t\tvar field_optgroup_value = settings.optgroupValueField;\r\n\t\r\n\t\t/**\r\n\t\t * Initializes selectize from a <input type=\"text\"> element.\r\n\t\t *\r\n\t\t * @param {object} $input\r\n\t\t * @param {object} settings_element\r\n\t\t */\r\n\t\tvar init_textbox = function($input, settings_element) {\r\n\t\t\tvar i, n, values, option;\r\n\t\r\n\t\t\tvar data_raw = $input.attr(attr_data);\r\n\t\r\n\t\t\tif (!data_raw) {\r\n\t\t\t\tvar value = $.trim($input.val() || '');\r\n\t\t\t\tif (!settings.allowEmptyOption && !value.length) return;\r\n\t\t\t\tvalues = value.split(settings.delimiter);\r\n\t\t\t\tfor (i = 0, n = values.length; i < n; i++) {\r\n\t\t\t\t\toption = {};\r\n\t\t\t\t\toption[field_label] = values[i];\r\n\t\t\t\t\toption[field_value] = values[i];\r\n\t\t\t\t\tsettings_element.options.push(option);\r\n\t\t\t\t}\r\n\t\t\t\tsettings_element.items = values;\r\n\t\t\t} else {\r\n\t\t\t\tsettings_element.options = JSON.parse(data_raw);\r\n\t\t\t\tfor (i = 0, n = settings_element.options.length; i < n; i++) {\r\n\t\t\t\t\tsettings_element.items.push(settings_element.options[i][field_value]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\r\n\t\t/**\r\n\t\t * Initializes selectize from a <select> element.\r\n\t\t *\r\n\t\t * @param {object} $input\r\n\t\t * @param {object} settings_element\r\n\t\t */\r\n\t\tvar init_select = function($input, settings_element) {\r\n\t\t\tvar i, n, tagName, $children, order = 0;\r\n\t\t\tvar options = settings_element.options;\r\n\t\t\tvar optionsMap = {};\r\n\t\r\n\t\t\tvar readData = function($el) {\r\n\t\t\t\tvar data = attr_data && $el.attr(attr_data);\r\n\t\t\t\tif (typeof data === 'string' && data.length) {\r\n\t\t\t\t\treturn JSON.parse(data);\r\n\t\t\t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t};\r\n\t\r\n\t\t\tvar addOption = function($option, group) {\r\n\t\t\t\t$option = $($option);\r\n\t\r\n\t\t\t\tvar value = hash_key($option.val());\r\n\t\t\t\tif (!value && !settings.allowEmptyOption) return;\r\n\t\r\n\t\t\t\t// if the option already exists, it's probably been\r\n\t\t\t\t// duplicated in another optgroup. in this case, push\r\n\t\t\t\t// the current group to the \"optgroup\" property on the\r\n\t\t\t\t// existing option so that it's rendered in both places.\r\n\t\t\t\tif (optionsMap.hasOwnProperty(value)) {\r\n\t\t\t\t\tif (group) {\r\n\t\t\t\t\t\tvar arr = optionsMap[value][field_optgroup];\r\n\t\t\t\t\t\tif (!arr) {\r\n\t\t\t\t\t\t\toptionsMap[value][field_optgroup] = group;\r\n\t\t\t\t\t\t} else if (!$.isArray(arr)) {\r\n\t\t\t\t\t\t\toptionsMap[value][field_optgroup] = [arr, group];\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tarr.push(group);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tvar option             = readData($option) || {};\r\n\t\t\t\toption[field_label]    = option[field_label] || $option.text();\r\n\t\t\t\toption[field_value]    = option[field_value] || value;\r\n\t\t\t\toption[field_disabled] = option[field_disabled] || $option.prop('disabled');\r\n\t\t\t\toption[field_optgroup] = option[field_optgroup] || group;\r\n\t\r\n\t\t\t\toptionsMap[value] = option;\r\n\t\t\t\toptions.push(option);\r\n\t\r\n\t\t\t\tif ($option.is(':selected')) {\r\n\t\t\t\t\tsettings_element.items.push(value);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\r\n\t\t\tvar addGroup = function($optgroup) {\r\n\t\t\t\tvar i, n, id, optgroup, $options;\r\n\t\r\n\t\t\t\t$optgroup = $($optgroup);\r\n\t\t\t\tid = $optgroup.attr('label');\r\n\t\r\n\t\t\t\tif (id) {\r\n\t\t\t\t\toptgroup = readData($optgroup) || {};\r\n\t\t\t\t\toptgroup[field_optgroup_label] = id;\r\n\t\t\t\t\toptgroup[field_optgroup_value] = id;\r\n\t\t\t\t\toptgroup[field_disabled] = $optgroup.prop('disabled');\r\n\t\t\t\t\tsettings_element.optgroups.push(optgroup);\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\t$options = $('option', $optgroup);\r\n\t\t\t\tfor (i = 0, n = $options.length; i < n; i++) {\r\n\t\t\t\t\taddOption($options[i], id);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\r\n\t\t\tsettings_element.maxItems = $input.attr('multiple') ? null : 1;\r\n\t\r\n\t\t\t$children = $input.children();\r\n\t\t\tfor (i = 0, n = $children.length; i < n; i++) {\r\n\t\t\t\ttagName = $children[i].tagName.toLowerCase();\r\n\t\t\t\tif (tagName === 'optgroup') {\r\n\t\t\t\t\taddGroup($children[i]);\r\n\t\t\t\t} else if (tagName === 'option') {\r\n\t\t\t\t\taddOption($children[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\r\n\t\treturn this.each(function() {\r\n\t\t\tif (this.selectize) return;\r\n\t\r\n\t\t\tvar instance;\r\n\t\t\tvar $input = $(this);\r\n\t\t\tvar tag_name = this.tagName.toLowerCase();\r\n\t\t\tvar placeholder = $input.attr('placeholder') || $input.attr('data-placeholder');\r\n\t\t\tif (!placeholder && !settings.allowEmptyOption) {\r\n\t\t\t\tplaceholder = $input.children('option[value=\"\"]').text();\r\n\t\t\t}\r\n\t\r\n\t\t\tvar settings_element = {\r\n\t\t\t\t'placeholder' : placeholder,\r\n\t\t\t\t'options'     : [],\r\n\t\t\t\t'optgroups'   : [],\r\n\t\t\t\t'items'       : []\r\n\t\t\t};\r\n\t\r\n\t\t\tif (tag_name === 'select') {\r\n\t\t\t\tinit_select($input, settings_element);\r\n\t\t\t} else {\r\n\t\t\t\tinit_textbox($input, settings_element);\r\n\t\t\t}\r\n\t\r\n\t\t\tinstance = new Selectize($input, $.extend(true, {}, defaults, settings_element, settings_user));\r\n\t\t});\r\n\t};\r\n\t\r\n\t$.fn.selectize.defaults = Selectize.defaults;\r\n\t$.fn.selectize.support = {\r\n\t\tvalidity: SUPPORTS_VALIDITY_API\r\n\t};\r\n\t\r\n\t\r\n\tSelectize.define('drag_drop', function(options) {\r\n\t\tif (!$.fn.sortable) throw new Error('The \"drag_drop\" plugin requires jQuery UI \"sortable\".');\r\n\t\tif (this.settings.mode !== 'multi') return;\r\n\t\tvar self = this;\r\n\t\r\n\t\tself.lock = (function() {\r\n\t\t\tvar original = self.lock;\r\n\t\t\treturn function() {\r\n\t\t\t\tvar sortable = self.$control.data('sortable');\r\n\t\t\t\tif (sortable) sortable.disable();\r\n\t\t\t\treturn original.apply(self, arguments);\r\n\t\t\t};\r\n\t\t})();\r\n\t\r\n\t\tself.unlock = (function() {\r\n\t\t\tvar original = self.unlock;\r\n\t\t\treturn function() {\r\n\t\t\t\tvar sortable = self.$control.data('sortable');\r\n\t\t\t\tif (sortable) sortable.enable();\r\n\t\t\t\treturn original.apply(self, arguments);\r\n\t\t\t};\r\n\t\t})();\r\n\t\r\n\t\tself.setup = (function() {\r\n\t\t\tvar original = self.setup;\r\n\t\t\treturn function() {\r\n\t\t\t\toriginal.apply(this, arguments);\r\n\t\r\n\t\t\t\tvar $control = self.$control.sortable({\r\n\t\t\t\t\titems: '[data-value]',\r\n\t\t\t\t\tforcePlaceholderSize: true,\r\n\t\t\t\t\tdisabled: self.isLocked,\r\n\t\t\t\t\tstart: function(e, ui) {\r\n\t\t\t\t\t\tui.placeholder.css('width', ui.helper.css('width'));\r\n\t\t\t\t\t\t$control.css({overflow: 'visible'});\r\n\t\t\t\t\t},\r\n\t\t\t\t\tstop: function() {\r\n\t\t\t\t\t\t$control.css({overflow: 'hidden'});\r\n\t\t\t\t\t\tvar active = self.$activeItems ? self.$activeItems.slice() : null;\r\n\t\t\t\t\t\tvar values = [];\r\n\t\t\t\t\t\t$control.children('[data-value]').each(function() {\r\n\t\t\t\t\t\t\tvalues.push($(this).attr('data-value'));\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tself.setValue(values);\r\n\t\t\t\t\t\tself.setActiveItem(active);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t};\r\n\t\t})();\r\n\t\r\n\t});\r\n\t\r\n\tSelectize.define('dropdown_header', function(options) {\r\n\t\tvar self = this;\r\n\t\r\n\t\toptions = $.extend({\r\n\t\t\ttitle         : 'Untitled',\r\n\t\t\theaderClass   : 'selectize-dropdown-header',\r\n\t\t\ttitleRowClass : 'selectize-dropdown-header-title',\r\n\t\t\tlabelClass    : 'selectize-dropdown-header-label',\r\n\t\t\tcloseClass    : 'selectize-dropdown-header-close',\r\n\t\r\n\t\t\thtml: function(data) {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t'<div class=\"' + data.headerClass + '\">' +\r\n\t\t\t\t\t\t'<div class=\"' + data.titleRowClass + '\">' +\r\n\t\t\t\t\t\t\t'<span class=\"' + data.labelClass + '\">' + data.title + '</span>' +\r\n\t\t\t\t\t\t\t'<a href=\"javascript:void(0)\" class=\"' + data.closeClass + '\">&times;</a>' +\r\n\t\t\t\t\t\t'</div>' +\r\n\t\t\t\t\t'</div>'\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}, options);\r\n\t\r\n\t\tself.setup = (function() {\r\n\t\t\tvar original = self.setup;\r\n\t\t\treturn function() {\r\n\t\t\t\toriginal.apply(self, arguments);\r\n\t\t\t\tself.$dropdown_header = $(options.html(options));\r\n\t\t\t\tself.$dropdown.prepend(self.$dropdown_header);\r\n\t\t\t};\r\n\t\t})();\r\n\t\r\n\t});\r\n\t\r\n\tSelectize.define('optgroup_columns', function(options) {\r\n\t\tvar self = this;\r\n\t\r\n\t\toptions = $.extend({\r\n\t\t\tequalizeWidth  : true,\r\n\t\t\tequalizeHeight : true\r\n\t\t}, options);\r\n\t\r\n\t\tthis.getAdjacentOption = function($option, direction) {\r\n\t\t\tvar $options = $option.closest('[data-group]').find('[data-selectable]');\r\n\t\t\tvar index    = $options.index($option) + direction;\r\n\t\r\n\t\t\treturn index >= 0 && index < $options.length ? $options.eq(index) : $();\r\n\t\t};\r\n\t\r\n\t\tthis.onKeyDown = (function() {\r\n\t\t\tvar original = self.onKeyDown;\r\n\t\t\treturn function(e) {\r\n\t\t\t\tvar index, $option, $options, $optgroup;\r\n\t\r\n\t\t\t\tif (this.isOpen && (e.keyCode === KEY_LEFT || e.keyCode === KEY_RIGHT)) {\r\n\t\t\t\t\tself.ignoreHover = true;\r\n\t\t\t\t\t$optgroup = this.$activeOption.closest('[data-group]');\r\n\t\t\t\t\tindex = $optgroup.find('[data-selectable]').index(this.$activeOption);\r\n\t\r\n\t\t\t\t\tif(e.keyCode === KEY_LEFT) {\r\n\t\t\t\t\t\t$optgroup = $optgroup.prev('[data-group]');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$optgroup = $optgroup.next('[data-group]');\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t$options = $optgroup.find('[data-selectable]');\r\n\t\t\t\t\t$option  = $options.eq(Math.min($options.length - 1, index));\r\n\t\t\t\t\tif ($option.length) {\r\n\t\t\t\t\t\tthis.setActiveOption($option);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\treturn original.apply(this, arguments);\r\n\t\t\t};\r\n\t\t})();\r\n\t\r\n\t\tvar getScrollbarWidth = function() {\r\n\t\t\tvar div;\r\n\t\t\tvar width = getScrollbarWidth.width;\r\n\t\t\tvar doc = document;\r\n\t\r\n\t\t\tif (typeof width === 'undefined') {\r\n\t\t\t\tdiv = doc.createElement('div');\r\n\t\t\t\tdiv.innerHTML = '<div style=\"width:50px;height:50px;position:absolute;left:-50px;top:-50px;overflow:auto;\"><div style=\"width:1px;height:100px;\"></div></div>';\r\n\t\t\t\tdiv = div.firstChild;\r\n\t\t\t\tdoc.body.appendChild(div);\r\n\t\t\t\twidth = getScrollbarWidth.width = div.offsetWidth - div.clientWidth;\r\n\t\t\t\tdoc.body.removeChild(div);\r\n\t\t\t}\r\n\t\t\treturn width;\r\n\t\t};\r\n\t\r\n\t\tvar equalizeSizes = function() {\r\n\t\t\tvar i, n, height_max, width, width_last, width_parent, $optgroups;\r\n\t\r\n\t\t\t$optgroups = $('[data-group]', self.$dropdown_content);\r\n\t\t\tn = $optgroups.length;\r\n\t\t\tif (!n || !self.$dropdown_content.width()) return;\r\n\t\r\n\t\t\tif (options.equalizeHeight) {\r\n\t\t\t\theight_max = 0;\r\n\t\t\t\tfor (i = 0; i < n; i++) {\r\n\t\t\t\t\theight_max = Math.max(height_max, $optgroups.eq(i).height());\r\n\t\t\t\t}\r\n\t\t\t\t$optgroups.css({height: height_max});\r\n\t\t\t}\r\n\t\r\n\t\t\tif (options.equalizeWidth) {\r\n\t\t\t\twidth_parent = self.$dropdown_content.innerWidth() - getScrollbarWidth();\r\n\t\t\t\twidth = Math.round(width_parent / n);\r\n\t\t\t\t$optgroups.css({width: width});\r\n\t\t\t\tif (n > 1) {\r\n\t\t\t\t\twidth_last = width_parent - width * (n - 1);\r\n\t\t\t\t\t$optgroups.eq(n - 1).css({width: width_last});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\r\n\t\tif (options.equalizeHeight || options.equalizeWidth) {\r\n\t\t\thook.after(this, 'positionDropdown', equalizeSizes);\r\n\t\t\thook.after(this, 'refreshOptions', equalizeSizes);\r\n\t\t}\r\n\t\r\n\t\r\n\t});\r\n\t\r\n\tSelectize.define('remove_button', function(options) {\r\n\t\toptions = $.extend({\r\n\t\t\t\tlabel     : '&times;',\r\n\t\t\t\ttitle     : 'Remove',\r\n\t\t\t\tclassName : 'remove',\r\n\t\t\t\tappend    : true\r\n\t\t\t}, options);\r\n\t\r\n\t\t\tvar singleClose = function(thisRef, options) {\r\n\t\r\n\t\t\t\toptions.className = 'remove-single';\r\n\t\r\n\t\t\t\tvar self = thisRef;\r\n\t\t\t\tvar html = '<a href=\"javascript:void(0)\" class=\"' + options.className + '\" tabindex=\"-1\" title=\"' + escape_html(options.title) + '\">' + options.label + '</a>';\r\n\t\r\n\t\t\t\t/**\r\n\t\t\t\t * Appends an element as a child (with raw HTML).\r\n\t\t\t\t *\r\n\t\t\t\t * @param {string} html_container\r\n\t\t\t\t * @param {string} html_element\r\n\t\t\t\t * @return {string}\r\n\t\t\t\t */\r\n\t\t\t\tvar append = function(html_container, html_element) {\r\n\t\t\t\t\treturn $('<span>').append(html_container)\r\n\t\t\t\t\t\t.append(html_element);\r\n\t\t\t\t};\r\n\t\r\n\t\t\t\tthisRef.setup = (function() {\r\n\t\t\t\t\tvar original = self.setup;\r\n\t\t\t\t\treturn function() {\r\n\t\t\t\t\t\t// override the item rendering method to add the button to each\r\n\t\t\t\t\t\tif (options.append) {\r\n\t\t\t\t\t\t\tvar id = $(self.$input.context).attr('id');\r\n\t\t\t\t\t\t\tvar selectizer = $('#'+id);\r\n\t\r\n\t\t\t\t\t\t\tvar render_item = self.settings.render.item;\r\n\t\t\t\t\t\t\tself.settings.render.item = function(data) {\r\n\t\t\t\t\t\t\t\treturn append(render_item.apply(thisRef, arguments), html);\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\toriginal.apply(thisRef, arguments);\r\n\t\r\n\t\t\t\t\t\t// add event listener\r\n\t\t\t\t\t\tthisRef.$control.on('click', '.' + options.className, function(e) {\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\tif (self.isLocked) return;\r\n\t\r\n\t\t\t\t\t\t\tself.clear();\r\n\t\t\t\t\t\t});\r\n\t\r\n\t\t\t\t\t};\r\n\t\t\t\t})();\r\n\t\t\t};\r\n\t\r\n\t\t\tvar multiClose = function(thisRef, options) {\r\n\t\r\n\t\t\t\tvar self = thisRef;\r\n\t\t\t\tvar html = '<a href=\"javascript:void(0)\" class=\"' + options.className + '\" tabindex=\"-1\" title=\"' + escape_html(options.title) + '\">' + options.label + '</a>';\r\n\t\r\n\t\t\t\t/**\r\n\t\t\t\t * Appends an element as a child (with raw HTML).\r\n\t\t\t\t *\r\n\t\t\t\t * @param {string} html_container\r\n\t\t\t\t * @param {string} html_element\r\n\t\t\t\t * @return {string}\r\n\t\t\t\t */\r\n\t\t\t\tvar append = function(html_container, html_element) {\r\n\t\t\t\t\tvar pos = html_container.search(/(<\\/[^>]+>\\s*)$/);\r\n\t\t\t\t\treturn html_container.substring(0, pos) + html_element + html_container.substring(pos);\r\n\t\t\t\t};\r\n\t\r\n\t\t\t\tthisRef.setup = (function() {\r\n\t\t\t\t\tvar original = self.setup;\r\n\t\t\t\t\treturn function() {\r\n\t\t\t\t\t\t// override the item rendering method to add the button to each\r\n\t\t\t\t\t\tif (options.append) {\r\n\t\t\t\t\t\t\tvar render_item = self.settings.render.item;\r\n\t\t\t\t\t\t\tself.settings.render.item = function(data) {\r\n\t\t\t\t\t\t\t\treturn append(render_item.apply(thisRef, arguments), html);\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\toriginal.apply(thisRef, arguments);\r\n\t\r\n\t\t\t\t\t\t// add event listener\r\n\t\t\t\t\t\tthisRef.$control.on('click', '.' + options.className, function(e) {\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\tif (self.isLocked) return;\r\n\t\r\n\t\t\t\t\t\t\tvar $item = $(e.currentTarget).parent();\r\n\t\t\t\t\t\t\tself.setActiveItem($item);\r\n\t\t\t\t\t\t\tif (self.deleteSelection()) {\r\n\t\t\t\t\t\t\t\tself.setCaret(self.items.length);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\r\n\t\t\t\t\t};\r\n\t\t\t\t})();\r\n\t\t\t};\r\n\t\r\n\t\t\tif (this.settings.mode === 'single') {\r\n\t\t\t\tsingleClose(this, options);\r\n\t\t\t\treturn;\r\n\t\t\t} else {\r\n\t\t\t\tmultiClose(this, options);\r\n\t\t\t}\r\n\t});\r\n\t\r\n\t\r\n\tSelectize.define('restore_on_backspace', function(options) {\r\n\t\tvar self = this;\r\n\t\r\n\t\toptions.text = options.text || function(option) {\r\n\t\t\treturn option[this.settings.labelField];\r\n\t\t};\r\n\t\r\n\t\tthis.onKeyDown = (function() {\r\n\t\t\tvar original = self.onKeyDown;\r\n\t\t\treturn function(e) {\r\n\t\t\t\tvar index, option;\r\n\t\t\t\tif (e.keyCode === KEY_BACKSPACE && this.$control_input.val() === '' && !this.$activeItems.length) {\r\n\t\t\t\t\tindex = this.caretPos - 1;\r\n\t\t\t\t\tif (index >= 0 && index < this.items.length) {\r\n\t\t\t\t\t\toption = this.options[this.items[index]];\r\n\t\t\t\t\t\tif (this.deleteSelection(e)) {\r\n\t\t\t\t\t\t\tthis.setTextboxValue(options.text.apply(this, [option]));\r\n\t\t\t\t\t\t\tthis.refreshOptions(true);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn original.apply(this, arguments);\r\n\t\t\t};\r\n\t\t})();\r\n\t});\r\n\t\r\n\r\n\treturn Selectize;\r\n}));"],
  "mappings": "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",
  "names": ["callback", "i", "field", "callback", "i", "field", "$", "highlight", "type", "input", "n", "options"]
}
